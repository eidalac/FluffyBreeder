<tw-storydata name="Fluffy Breeder" startnode="14" creator="Twine" creator-version="2.3.11" ifid="E5315F2F-BA71-4337-9BC1-13AA85D0835F" zoom="1" format="SugarCube" format-version="2.31.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">/* clears SugarCube's default transition */
.passage {
    transition: none;
    -webkit-transition: none;
}

.hidden {
	display: none;
}

/* default is 54em */
#passages {
    max-width: 100%;
}

.passage h2 {
  	font-size:1em;
  	margin-bottom:0px
}

.imageRef {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    align-items: flex-start;
    position: relative;
}

.tinyImg {
    height: 120px;
    width: 120px;
    float: left;
}

.smlImg {
    height: 150px;
    width: 150px;
    float: left;
}

.medImg {
    height: 300px;
    width: 300px;
    float: right;
}

.lrgRender {
    height: 531px;
    width: 531px;
    margin-right: -50px;
    margin-left: 3px;
    float: right;
}

.lrgVector {
    width: 336px;
    height: 600px;
    float: right;
}

.lrgVector svg {
    width: 336px;
    height: 600px;
}

/* Colors are made as css classes, to allow them to be
   changed for a light color scheme (for example). */
.link { color: #68D } /* link color */
.aquamarine { color: aquamarine }
.coral { color: coral }
.cyan { color: cyan }
.darkgoldenrod { color: darkgoldenrod }
.darkred { color: darkred }
.darkviolet { color: darkviolet }
.deeppink { color: deeppink }
.deepskyblue { color: deepskyblue }
.gold { color: gold }
.goldenrod { color: goldenrod }
.gray { color: gray }
.green { color: green }
.hotpink { color: hotpink }
.lawngreen { color: lawngreen }
.lightcoral { color: lightcoral }
.lightgreen { color: lightgreen }
.lightpink { color: lightpink }
.lightsalmon { color: lightsalmon }
.lime { color: lime }
.limegreen { color: limegreen }
.magenta { color: magenta }
.mediumaquamarine { color: mediumaquamarine }
.mediumorchid { color: mediumorchid }
.mediumseagreen { color: mediumseagreen }
.orange { color: orange }
.orangered { color: orangered }
.orchid { color: orchid }
.pink { color: pink }
.red { color: red }
.seagreen { color: seagreen }
.springgreen { color: springgreen }
.tan { color: tan }
.yellow { color: yellow }
.yellowgreen { color: yellowgreen }

.link a { color: #68D } /* link color */
.aquamarine a { color: aquamarine }
.coral a { color: coral }
.cyan a { color: cyan }
.darkgoldenrod a { color: darkgoldenrod }
.darkred a { color: darkred }
.darkviolet a { color: darkviolet }
.deeppink a { color: deeppink }
.deepskyblue a { color: deepskyblue }
.gold a { color: gold }
.goldenrod a { color: goldenrod }
.gray a { color: gray }
.green a { color: green }
.hotpink a { color: hotpink }
.lawngreen a { color: lawngreen }
.lightcoral a { color: lightcoral }
.lightgreen a { color: lightgreen }
.lightpink a { color: lightpink }
.lightsalmon a { color: lightsalmon }
.lime a { color: lime }
.limegreen a { color: limegreen }
.magenta a { color: magenta }
.mediumaquamarine a { color: mediumaquamarine }
.mediumorchid a { color: mediumorchid }
.mediumseagreen a { color: mediumseagreen }
.orange a { color: orange }
.orangered a { color: orangered }
.orchid a { color: orchid }
.pink a { color: pink }
.red a { color: red }
.seagreen a { color: seagreen }
.springgreen a { color: springgreen }
.tan a { color: tan }
.yellow a { color: yellow }
.yellowgreen a { color: yellowgreen }

/*! <<checkvars>> macro for SugarCube 2.x */
#ui-dialog-body.checkvars{padding:1em}#ui-dialog-body.checkvars h1{font-size:1em;margin-top:0}#ui-dialog-body.checkvars table{border-collapse:collapse;border-spacing:0}#ui-dialog-body.checkvars thead tr{border-bottom:2px solid #444}#ui-dialog-body.checkvars tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.checkvars td,#ui-dialog-body.checkvars th{padding:.25em 1em}#ui-dialog-body.checkvars td:first-child,#ui-dialog-body.checkvars th:first-child{padding-left:.5em;border-right:1px solid #444}#ui-dialog-body.checkvars td:last-child,#ui-dialog-body.checkvars th:last-child{padding-right:.5em}#ui-dialog-body.checkvars th:first-child{text-align:center}#ui-dialog-body.checkvars td:first-child{font-weight:700;text-align:right}#ui-dialog-body.checkvars td{font-family:monospace,monospace;vertical-align:top;white-space:pre-wrap}#ui-dialog-body.checkvars .scroll-pad{margin:0;padding:0}

/*! <<bugreport>> macro for SugarCube 2.x */
#ui-dialog-body.bugreport #bugreport-info{margin-bottom:1em}#ui-dialog-body.bugreport #bugreport-data{display:block;overflow:auto;font-family:monospace,monospace;background-color:transparent;border:1px solid #444;margin:0;padding:6px;height:auto;min-height:200px;white-space:normal}#ui-dialog-body.bugreport .scroll-pad{margin:0;padding:0}
</style><script role="script" id="twine-user-script" type="text/twine-javascript">/**
 * Library that contains objects that represent genomes (a.k.a. gene strings),
 * as well as their composite genes and alleles.
 * 
 * Orignal code from https://github.com/armatronic
 * 
 */


/**
 * Representation of a single allele. (An allele is one half of a gene.)
 *
 * @param string name The character for the allele.
 
 function Allele(name) {
    this.name = name;
};
 */
window.Allele = function (name) {
    this.name = name;
}

/**
 * Creates an allele from a string.
 *
 * Usually, an allele is represented by a single character, but it may be any
 * string.
 *
 * @param string name The character for the allele.
 *
 * @return Allele
 */
Allele.fromString = function(name) {
    return new Allele(name);
};

/**
 * Compares this allele with another.
 *
 * @param Allele other
 *
 * @return bool
 */
Allele.prototype.equals = function(other) {
    return this.name == other.name;
};

/**
 * Returns string representation of this allele.
 *
 * @return string
 */
Allele.prototype.toString = function() {
    return this.name;
};


/**
 * Representation of a list of alleles. Usually generated from a gene string as
 * that gene's possible contributions to a breeding with another gene.
 *
 * @param array[Allele] list The list of alleles that go into this string.
 */
function AlleleString(list) {
    this.alleles = list;
    this.length = this.alleles.length;
};

/**
 * Creates allele string from a list of alleles.
 *
 * @param array[Allele] list
 *
 * @return AlleleString
 */
AlleleString.fromAlleles = function(list) {
    return new AlleleString(list);
};

/**
 * Creates allele string from a string representation.
 *
 * Alleles within a string are split with ; characters.
 *
 * @param string str
 *
 * @return AlleleString
 */
AlleleString.fromString = function(str) {
    //
    // Alleles are split by ; characters.
    var allele_list = [];
    var parts       = str.split(';');
    for (var i in parts) {
        allele_list.push(Allele.fromString(parts[i]));
    }
    return AlleleString.fromAlleles(allele_list);
};

/**
 * Creates a new genome from the breeding of this and another AlleleString.
 *
 * @param AlleleString other
 *
 * @return Genome
 */
AlleleString.prototype.breedWith = function(other) {
    return Genome.fromAlleleStrings(this, other);
};

/**
 * Retrieves the allele at position i (starting at 0).
 *
 * @param int i
 *
 * @return Allele
 */
AlleleString.prototype.elementAt = function(i) {
    return this.alleles[i];
};

/**
 * Compares this allele string to another.
 *
 * @param AlleleString other
 *
 * @return bool
 */
AlleleString.prototype.equals = function(other) {
    return this.alleles == other.alleles;
};

/**
 * Returns string representation of this allele string. Essentially, the
 * opposite of AlleleString.fromString().
 *
 * @return string
 */
AlleleString.prototype.toString = function() {
    return this.alleles.join(';');
};


/**
 * Representation of a single gene within a genome. Each gene contains a pair of
 * alleles.
 *
 * @param Allele allele1
 * @param Allele allele2
 
 function Gene(allele1, allele2) {
    this.allele1 = allele1;
    this.allele2 = allele2;
};
 */
window.Gene = function (allele1, allele2) {
    this.allele1 = allele1;
    this.allele2 = allele2;
}

/**
 * Creates a gene from two alleles.
 *
 * @param Allele allele1
 * @param Allele allele2
 *
 * @return Gene
 */
Gene.fromAlleles = function(a1, a2) {
    return new Gene(a1, a2);
};

/**
 * Creates a gene from a string.
 *
 * Alleles in a gene are split by a / character.
 *
 * @param string str
 *
 * @return Gene
 */
Gene.fromString = function(str) {
    var parts = str.split('/');
    return Gene.fromAlleles(Allele.fromString(parts[0]), Allele.fromString(parts[1]));
};

/**
 * A gene can be considered as lethal to a genome that it is a part of if its
 * alleles are equal.
 *
 * @return bool
 */
Gene.prototype.isLethal = function() {
    return this.allele1.equals(this.allele2);
};

/**
 * Compares this gene string to another.
 *
 * @param Gene other
 *
 * @return bool
 */
Gene.prototype.equals = function(other) {
    return this.allele1.equals(other.allele1) && this.allele2.equals(other.allele2);
};

/**
 * Returns string representation of this gene. Essentially, the opposite of
 * Gene.fromString().
 *
 * @return string
 */
Gene.prototype.toString = function() {
    return this.allele1.toString()+'/'+this.allele2.toString();
};


/**
 * Representation of a genome.
 *
 * @param array[Gene] genes
 Genome = function(genes) {
    this.genes = genes;
    this.length = this.genes.length;
};
 */
window.Genome = function (genes) {
    this.genes = genes;
    this.length = this.genes.length;
}

/**
 * Creates a genome from a list of genes.
 *
 * @param array[Gene] genes
 *
 * @return Genome
 */
Genome.fromGenes = function(genes) {
    return new Genome(genes);
};

/**
 * Creates a genome from two allele strings by breeding them together.
 *
 * If the allele strings are of varying length, the longer one is truncated to
 * the same length as the shorter.
 *
 * @param AlleleString string1
 * @param AlleleString string2
 *
 * @return Genome
 */
Genome.fromAlleleStrings = function(string1, string2) {
    var genes = [];
    var gene_string_length = Math.min(string1.length, string2.length);
    for (var i = 0; i < gene_string_length; i++) {
        genes[i] = Gene.fromAlleles(string1.elementAt(i), string2.elementAt(i));
    }
    return Genome.fromGenes(genes);
};

/**
 * Creates a genome from a string representation.
 *
 * Genes within the genome are split by ; characters, and alleles within each
 * gene are split by / characters.
 *
 * @param string str
 *
 * @return Genome
 
 Genome.fromString = function(str) {
    var genes = [];
    var parts = str.split(';');
    for (var i in parts) {
        genes.push(Gene.fromString(parts[i]));
    }
    return Genome.fromGenes(genes);
};
 
 */
window.Genome.fromString  = function (str) {
    var genes = [];
    var parts = str.split(';');
    for (var i in parts) {
        genes.push(Gene.fromString(parts[i]));
    }
    return Genome.fromGenes(genes);
}

/**
 * Picks one random child from this genome and another genome.
 * Building the whole punnette table is too taxing, so just pick one option gene by gene.
 *
 * @param Genome other_genome
 *
 * @return Genome
 */
Genome.prototype.breedWithGenome = function(other_genome) {
	var child_genes = "";

	for (var i = 0; i < this.length; i++) {
		var k = Math.floor(Math.random() * (1 - 0 + 1)) + 0;
		var l = Math.floor(Math.random() * (1 - 0 + 1)) + 0;
		
		if (i > 0) 
			child_genes += ";";

		if (k == 0) {
			// 0
			if (l == 0) {
				//00
				child_genes += this.elementAt(i).allele2;
				child_genes += "/";
				child_genes += other_genome.elementAt(i).allele2;
			} else {
				//01
				child_genes += this.elementAt(i).allele2;
				child_genes += "/";
				child_genes += other_genome.elementAt(i).allele1;
			}
		} else {
			// 1
			if (l == 0) {
				// 10
				child_genes += this.elementAt(i).allele1;
				child_genes += "/";
				child_genes += other_genome.elementAt(i).allele2;
			} else {
				// 11
				child_genes += this.elementAt(i).allele1;
				child_genes += "/";
				child_genes += other_genome.elementAt(i).allele1;
			}
		}
	}
     
    return Genome.fromString(child_genes); 
}

/**
 * Retrieves the gene at position i (starting at 0).
 *
 * @param int i
 *
 * @return Gene
 */
Genome.prototype.elementAt = function(i) {
    return this.genes[i];
};


/**
 * Comparison for whether this genome is the same as another.
 *
 * @return bool
 */
Genome.prototype.equals = function(other) {
    if (this.length != other.length) {
        return false;
    }
    var gene_string_length = Math.min(this.length, other.length);
    for (var i = 0; i < gene_string_length; i++) {
        if (!(this.elementAt(i).equals(other.elementAt(i)))) {
            return false;
        }
    }
    return true;
};

/**
 * Returns a string representation of this genome.
 *
 * @return string
 */
Genome.prototype.toString = function() {
    return this.genes.join(';');
};


/********************************************************************************************
 * Fluffy Specific Gene Code
 ********************************************************************************************/


/**
 * Retrieves the gene determining gender.
 *
 * This is defined as the first gene (0), X\X or X\Y.
 *
 * @return Gene
 */
Genome.prototype.getGender = function() {
	return this.elementAt(0);
	return Genome.fromString(this.elementAt(0).toString());
};

/**
 * Retrieves returns a string name for the gender gene.
 *
 * @return String
 */
Genome.prototype.getGenderString = function() {
	if (this.getGender().toString() == "X/X") {
		return "Female";
	} else {
		return "Male";
	}
};

/**
 * Retrieves the gene determining adult size (length).
 *
 * This is defined as genes 1, 2 and 3 (A/a;B/b;C/c).
 *
 * @return Genome
 */
Genome.prototype.getLength = function() {
	return Genome.fromString(this.elementAt(1).toString() + ";" + this.elementAt(2).toString() +";" + this.elementAt(3).toString());
};

/**
 * Sets the gender gene to male or female (used for random generation).
 *
 * @param string new_gender string of either Male or Female.
 */
Genome.prototype.setGender = function(new_gender) {
	new_gender = new_gender.toLowerCase();
	
	if (new_gender == "male") {
		this.genes[0] = Gene.fromString("X/Y");
	} else {
		this.genes[0] = Gene.fromString("X/X");
	}
};



/**
 * Returns the Phenotype details for a gene triplet
 * Called when no genes are co-dominate, currenly only used for the Length gene
 *
 * @param int index the index location of the first of the gene pair
 * @param string gene_string the letters of this gene, in the format "A/B/C"
 *  (where the genes would have the "A/a;B/b;C/c" pattern)
 * 
 * @return int
 */
Genome.prototype.triplePhenotype = function(index, gene_string) {
	
	// booleans for the possible matches, set to false to start.
	var domOne = false;
	var domTwo = false;
	var domThree = false;
	
	// Get the three letters we are looking for
	var parts = gene_string.split('/');
	
	// Make them all upper case to start, so we have {[A], [B], [C]}
	parts[0] = parts[0].toUpperCase();
	parts[1] = parts[1].toUpperCase();
	parts[2] = parts[2].toUpperCase();
	
	// Get the genes
	var geneOne = this.elementAt(index).toString().split('/');		// {[A], [a]}
	var geneTwo = this.elementAt(index+1).toString().split('/');	// {[B], [b]}
	var geneThree = this.elementAt(index+2).toString().split('/');	// {[C], [c]}
	
	/**
	 * Combinations are:
	 * A/A, A/a, a/A, a/a and B/B, B/b, b/B, b/b
	 * **/

	// We only care if 1) one is A or 2) both are a (2 is default, so we only need to test for 1)
	if (parts[0] == geneOne[0] || parts[0] == geneOne[1]) {
		// since parts[0] is upper, we know one or the other aleale is uppercase
		domOne = true;
	}
	
	// Same for B in this case
	if (parts[1] == geneTwo[0] || parts[1] == geneTwo[1]) {
		// since parts[1] is upper, we know one or the other aleale is uppercase
		domTwo = true;
	}
	
	// Same for C in this case
	if (parts[2] == domThree[0] || parts[2] == domThree[1]) {
		// since parts[2] is upper, we know one or the other aleale is uppercase
		domTwo = true;
	}
	
	if (domOne && !domTwo && !domThree) {
		return 0;
	}
	if (!domOne && domTwo && !domThree) {
		return 1;
	}
	if (!domOne && domTwo && domThree) {
		return 2;
	}
	if (domOne && domTwo && domThree) {
		return 3;
	}
	if (domOne && domTwo && !domThree) {
		return 4;
	}
	if (domOne && !domTwo && domThree) {
		return 5;
	}
	if (!domOne && !domTwo && domThree) {
		return 6;
	}
	if (!domOne && !domTwo && !domThree) {
		return 7;
	}
	return -1;
};

/**
 * Retrieves returns the index the length gene codes to.
 * The gene starts at location 1, and has the format "A/a;B/b;C/c".
 * 
 * There are 8 phenotype combinations
 * 
 * Genes		Index	Base Value
 * [ A b c ]     0		39 + random(0,1)
 * [ a B c ]     1		37 + random(0,1)
 * [ a B C ]     2		35 + random(0,1)
 * [ A B C ]     3		33 + random(0,1)
 * [ A B c ]     4		31 + random(0,1)
 * [ A b C ]     5		29 + random(0,1)
 * [ a b C ]     6		27 + random(0,1)
 * [ a b c ]     7		25 + random(0,1)
 *
 * @return Int
 */
Genome.prototype.getLength = function() {
	switch (this.triplePhenotype(1, "A/B/C")) {
	case 0:
		return 39;
	case 1:
		return 37;
	case 2:
		return 35;
	case 3:
		return 33;
	case 4:
		return 31;
	case 5:
		return 29;
	case 6:
		return 27;
	case 7:
		return 25;
	default:
		return -1;
	}
}

/**
 * Retrieves the gene determining adult size (Lenght).
 *
 * This is defined as genes 1, 2 and 3 (A/a;B/b;C/c).
 *
 * @return Genome
 */
Genome.prototype.getLengthGene = function() {
	return Genome.fromString(this.elementAt(1).toString() + ";" + this.elementAt(2).toString() + ";" + this.elementAt(3).toString());
};

/**
 * Retrieves returns a string name for the size (length) gene.
 *
 * @return String
 */
Genome.prototype.getLengthDesc = function() {
	switch (this.getLength()) {
	case 39:
		return "Longest (39-40 cm)";
	case 37:
		return "Longer (37-38 cm)";
	case 35:
		return "Longer (35-36 cm)";
	case 33:
		return "Average (33-34 cm)";
	case 31:
		return "Short (31-32 cm)";
	case 29:
		return "Shorter (29-30 cm)";
	case 27:
		return "Shorter (27-28 cm)";
	case 25:
		return "Shortest (25-26 cm)";
	default:
		return "UNDEFINED SIZE (LENGTH)";
	}
};


/**
 * Returns the Phenotype details for a gene pair
 *
 * @param int index the index location of the first of the gene pair 
 * @param string gene_string the two letters of this gene, in the format "A/B"
 *  (where the genes would have the "A/a;B/b" pattern)
 * 
 * @return int
 */
Genome.prototype.doublePhenotype = function(index, gene_string) {
	
	// booleans for the possible matches, set to false to start.
	var domOne = false;
	var recOne = false;
	var domTwo = false;
	var recTwo = false;
	
	// Get the two letters we are looking for
	var parts = gene_string.split('/');
	
	// Make them both upper case to start, so we have {[A], [B]}
	parts[0] = parts[0].toUpperCase();
	parts[1] = parts[1].toUpperCase();
	
	// Get the genes, sort them so upper case is first.
	var geneOne = this.elementAt(index).toString().split('/').sort().reverse();			// {[A], [a]}
	var geneTwo = this.elementAt(index+1).toString().split('/').sort().reverse();		// {[B], [b]}
	
	/**
	 * Combinations are:
	 * A/A, A/a, a/A, a/a and B/B, B/b, b/B, b/b
	 * **/

	// default is mixed case, so just check if both are upper case or both are lower:
	if (parts[0] == geneOne[0] && parts[0] == geneOne[1]) {
		// Both upper case.
		domOne = true;
	} else if (geneOne[0] == geneOne[1]) {
		// Both are Lower case
		recOne = true;
	}

	// default is mixed case, so just check if both are upper case or both are lower:
	if (parts[1] == geneTwo[0] && parts[1] == geneTwo[1]) {
		// Both upper case.
		domTwo = true;
	} else if (geneTwo[0] == geneTwo[1]) {
		// Both are Lower case
		recTwo = true;
	}
	
	if (recOne && recTwo) {
		return 0;
	}
	if (!recOne && domTwo) {
		return 1;
	}
	if (!recOne && !domTwo && !recTwo) {
		return 2;
	}
	if (!recOne && recTwo) {
		return 3;
	}
	if (recOne && !domTwo && !recTwo) {
		return 4;
	}
	if (recOne && domTwo) {
		return 5;
	}
	
	return -1;
};


/**
 * Retrieves the gene determining adult size (Height).
 * This is defined as genes 4 and 5 (E/e;F/f).
 * 
 * There are 6 phenotype combinations
 * for Fluffy genes, they are indexed as:
 * 
 * Genes		Index	base value
 * [ e f  ]     0		(65 + random(0,1))/100
 * [ E F  ]     1		(62 + random(0,1))/100
 * [ E fF ]     2		(59 + random(0,1))/100
 * [ E f  ]     3		(56 + random(0,1))/100
 * [ e fF ]     4		(53 + random(0,1))/100
 * [ e F  ]     5		(50 + random(0,1))/100
 *
 * @return Int
 */
Genome.prototype.getHeight = function() {
	switch (this.doublePhenotype(4, "E/F")) {
	case 0:
		return 0.65;
	case 1:
		return 0.62;
	case 2:
		return 0.59;
	case 3:
		return 0.56;
	case 4:
		return 0.53;
	case 5:
		return 0.50;
	default:
		return -1;
	}
}

/**
 * Retrieves the gene determining adult size (Height).
 * This is defined as genes 4 and 5 (E/e;F/f).
 *
 * @return Genome
 */
Genome.prototype.getHeightGene = function() {
	return Genome.fromString(this.elementAt(4).toString() + ";" + this.elementAt(5).toString());
};

/**
 * Retrieves returns a string name for the size (Height) gene.
 *
 * This is defined as genes 4 and 5 (E/e;F/f).
 * 
 * E is dominate over e, F/f are non-dominate to each other.
 *
 * @return String
 */
Genome.prototype.getHeightDesc = function() {
	switch (this.getHeight()) {
	case 0.65:
		return "Tallest (0.65-0.67 multiplier)";
	case 0.62:
		return "Taller (0.62-0.64 multiplier)";
	case 0.59:
		return "Average (0.59-0.61 multiplier)";
	case 0.56:
		return "Shorter (0.56-0.58 multiplier)";
	case 0.53:
		return "Shorter (0.53-0.55 multiplier)";
	case 0.50:
		return "Shortest (0.50-0.52 multiplier)";
	default:
		return "UNDEFINED SIZE (HEIGHT)";
	}
};

/**
 * Retrieves the gene determining adult size (Weight).
 * This is defined as genes 6 and 7 (G/g;H/h).
 * 
 * There are 6 phenotype combinations
 * for Fluffy genes, they are indexed as:
 * 
 * Genes		Index	base value
 * [ g h  ]     0		0.105
 * [ G H  ]     1		0.100
 * [ G hH ]     2		0.095
 * [ G h  ]     3		0.090
 * [ g hH ]     4		0.085
 * [ g H  ]     5		0.080
 *
 * @return Int
 */
Genome.prototype.getWeight = function() {
	switch (this.doublePhenotype(6, "G/H")) {
	case 0:
		return 0.105;
	case 1:
		return 0.100;
	case 2:
		return 0.095;
	case 3:
		return 0.090;
	case 4:
		return 0.085;
	case 5:
		return 0.080;
	default:
		return -1;
	}
}

/**
 * Retrieves the gene determining adult Weight
 *
 * This is defined as genes 6 and 7 (G/g;H/h).
 *
 * @return Genome
 */
Genome.prototype.getWeightGene = function() {
	return Genome.fromString(this.elementAt(6).toString() + ";" + this.elementAt(7).toString());
};

/**
 * Retrieves returns a string name for the Weight gene.
 *
 * G is dominate over g, H/h are non-dominate to each other.
 *
 * @return String
 */
Genome.prototype.getWeightDesc = function() {
	switch (this.getWeight()) {
	case 0.105:
		return "Heavest (0.105)";
	case 0.100:
		return "Heavier (01.00)";
	case 0.095:
		return "Average (0.095)";
	case 0.090:
		return "Lighter (0.090)";
	case 0.085:
		return "Lighter (0.085)";
	case 0.080:
		return "Lightest (0.080)";
	default:
		return "UNDEFINED SIZE (WEIGHT)";
	}
};

/**
 * Retrieves the gene determining adult max Age.
 * This is defined as genes 8 and 9 (J/j;K/k).
 * 
 * There are 6 phenotype combinations
 * for Fluffy genes, they are indexed as:
 * 
 * Lifespan:
 * JjKk
 * Phenotype	Index	Count	Percent	Age
 * j  k			0		1		6.3		12
 * J  K			1		3		18.8	11
 * J  kK		2		6		37.5	10
 * J  k			3		3		18.8	9
 * j  kK		4		2		12.5	8
 * j  K			5		1		6.3 	7	
 *
 *
 * @return Int
 */
Genome.prototype.getMaxAge = function() {
	switch (this.doublePhenotype(8, "J/K")) {
	case 0:
		return 12;
	case 1:
		return 11;
	case 2:
		return 10;
	case 3:
		return 9;
	case 4:
		return 8;
	case 5:
		return 7;
	default:
		return -1;
	}
}

/**
 * Retrieves the gene determining maximum age
 *
 * This is defined as genes 8 and 9 (J/j;K/k).
 *
 * @return Genome
 */
Genome.prototype.getMaxAgeGene = function() {
	return Genome.fromString(this.elementAt(8).toString() + ";" + this.elementAt(9).toString());
};

/**
 * Retrieves returns a string name for the Age gene.
 *
 * @return String
 */
Genome.prototype.getMaxAgeDesc = function() {
	switch (this.getMaxAge()) {
	case 12:
		return "Oldest (12)";
	case 11:
		return "Older (11)";
	case 10:
		return "Average (10)";
	case 9:
		return "Younger (9)";
	case 8:
		return "Younger (8)";
	case 7:
		return "Youngest (7)";
	default:
		return "UNDEFINED AGE [" + this.getMaxAge() + "]";
	}
};

/**
 * Retrieves the gene determining adult max Age.
 * This is defined as genes 10 and 11 (M/n;N/n).
 * 
 * There are 6 phenotype combinations
 * for Fluffy genes, they are indexed as:
 * 
 * Fertility:
 * MmNn
 * Phenotype	Index	Count	Percent	Litter	Mlik (ml)
 * m  n			0		1		6.3		2-3		200-400
 * M  N			1		3		18.8	3-4		300-500
 * M  nN		2		6		37.5	4-5		400-700
 * M  n			3		3		18.8	5-6		500-800
 * m  nN		4		2		12.5	6-7		700-1000
 * m  N			5		1		6.3 	7-8		800-1100	
 *
 * @return Int
 */
Genome.prototype.getFertility = function() {
	switch (this.doublePhenotype(10, "M/N")) {
	case 0:
		return 2;
	case 1:
		return 3;
	case 2:
		return 4;
	case 3:
		return 5;
	case 4:
		return 6;
	case 5:
		return 7;
	default:
		return -1;
	}
}

/**
 * Retrieves the gene determining fertility
 *
 * This is defined as genes 10 and 11 (M/n;N/n).
 *
 * @return Genome
 */
Genome.prototype.getFertilityGene = function() {
	return Genome.fromString(this.elementAt(10).toString() + ";" + this.elementAt(11).toString());
};

/**
 * Retrieves returns a string name for the fertility gene.
 *
 * @return String
 */
Genome.prototype.getFertilityDesc = function() {
	switch (this.getFertility()) {
	case 2:
		return "2";
	case 3:
		return "3";
	case 4:
		return "4";
	case 5:
		return "5";
	case 6:
		return "6";
	case 7:
		return "7";
	default:
		return "UNDEFINED FERTILITY [" + this.getFertility() + "]";
	}
};


/**
 * Retrieves the gene determining age of maturity.
 * This is defined as genes 12 and 13 (S/s;X/x).
 * 
 * There are 6 phenotype combinations
 * for Fluffy genes, they are indexed as:
 * 
 * Maturity:
 * SsXx
 * Phenotype	Index	Count	Percent	Age (weeks)
 * s  s			0		1		6.3		36-37
 * S  S			1		3		18.8	38-39
 * S  sS		2		6		37.5	40-41
 * S  s			3		3		18.8	42-43
 * s  sS		4		2		12.5	44-45
 * s  S			5		1		6.3 	46-47
 *
 * @return Int
 */
Genome.prototype.getMaturity = function() {
	switch (this.doublePhenotype(12, "S/X")) {
	case 0:
		return 36;
	case 1:
		return 38;
	case 2:
		return 40;
	case 3:
		return 42;
	case 4:
		return 44;
	case 5:
		return 46;
	default:
		return -1;
	}
}

/**
 * Retrieves the gene determining Maturity
 *
 * This is defined as genes 12 and 13 (S/s;X/x).
 *
 * @return Genome
 */
Genome.prototype.getMaturityGene = function() {
	return Genome.fromString(this.elementAt(12).toString() + ";" + this.elementAt(13).toString());
};

/**
 * Retrieves returns a string name for the Maturity gene.
 *
 * @return String
 */
Genome.prototype.getMaturityDesc = function() {
	switch (this.getMaturity()) {
	case 36:
		return "36";
	case 38:
		return "38";
	case 40:
		return "40";
	case 42:
		return "42";
	case 44:
		return "44";
	case 46:
		return "46";
	default:
		return "UNDEFINED MATURITY";
	}
};

/**
 * Retrieves the gene determining Breed
 *
 * This is defined as genes 14 and 15, 16 (E/e;P/a;U/a).
 *
 * @return Genome
 */
Genome.prototype.getBreed = function() {
	return Genome.fromString(this.elementAt(14).toString() + ";" + this.elementAt(15).toString() + ";" + this.elementAt(16).toString());
};


/**
 * Returns the Phenotype details for a gene triplet for the breed gene
 * This is a special case, as there are mutliple recesive genes involved.
 * The gene pattern is "E/e;P/a;U/a"
 *
 * @param int index the index location of the first of the gene pair
 * @param string gene_string the letters of this gene
 * 
 * @return int
 */
Genome.prototype.breedPhenotype = function(index, gene_string) {
	
	// booleans for the possible matches, set to false to start.
	var domOne = false;
	var domTwo = false;
	var domThree = false;

	// Get the three letters we are looking for
	var parts = gene_string.split('/');
	
	// Make sure the first 3 are upper case, but the last can be left lower, so we have {[E], [P], [U], [a]}
	parts[0] = parts[0].toUpperCase();
	parts[1] = parts[1].toUpperCase();
	parts[2] = parts[2].toUpperCase();
	parts[3] = parts[3].toLowerCase();
	
	// Get the genes
	var geneOne = this.elementAt(index).toString().split('/');		// {[E], [e]}
	var geneTwo = this.elementAt(index+1).toString().split('/');	// {[P], [a]}
	var geneThree = this.elementAt(index+2).toString().split('/');	// {[U], [a]}
	
	// Two of these are only upper case, one is only lower, and only one can be in either state.
	
	// Check the first gene, if either is upper case it's dominate
	if (parts[0] == geneOne[0] || parts[0] == geneOne[1]) {
		// since parts[0] is upper, we know one or the other aleale is uppercase
		domOne = true;
	}
	
	// For the others, we need to check if either is Dominate or if both are the recessive trait
	if (parts[1] == geneTwo[0] || parts[1] == geneTwo[1]) {
		// If either of those match, we know it's not a double recesive
		domTwo = true;
	}
	if (parts[2] == geneThree[0] || parts[2] == geneThree[1]) {
		// If either of those match, we know it's not a double recesive
		domThree = true;
	}

	/**
	 * There are 8 phenotype combinations
	 * 
	 * for Fluffy genes, they are indexed as:
	 * 
	 * Genes		Index
	 * [ E P U ]     0
	 * [ E P a ]     1
	 * [ E a U ]     2
	 * [ e P U ]     3
	 * [ E a a ]     4
	 * [ e P a ]     5
	 * [ e a U ]     6
	 * [ e a a ]     7
	 * **/
	
	if (domOne && domTwo && domThree) {
		return 0;
	}
	if (domOne && domTwo && !domThree) {
		return 1;
	}
	if (domOne && !domTwo && domThree) {
		return 2;
	}
	if (!domOne && domTwo && domThree) {
		return 3;
	}
	if (domOne && !domTwo && !domThree) {
		return 4;
	}
	if (!domOne && domTwo && !domThree) {
		return 5;
	}
	if (!domOne && !domTwo && domThree) {
		return 6;
	}
	if (!domOne && !domTwo && !domThree) {
		return 7;
	}
	return -1;
};

/**
 * Retrieves returns a string name for the Breed gene.
 *
 * This is a special case, as there are mutliple recesive genes involved.
 * The gene pattern is "E/e;P/a;U/a"
 *
 * @return String
 */
Genome.prototype.getBreedString = function() {
	switch (this.breedPhenotype(14, "E/P/U/a")) {
	case 0:
		return "Earthy";
	case 1:
		return "Pegasus";
	case 2:
		return "Unicorn";
	case 3:
		return "SETTING_DEPENDENT_BREED";
	case 4:
		return "Earthy";
	case 5:
		return "Pegasus";
	case 6:
		return "Unicorn";
	case 7:
		return "Alicorn";
	default:
		return "UNDEFINED BREED";
	}
};

/******************************************************
 * COLOR SHIT THIS IS GOING TO BE LARGE 
 *******************************************************/

/**
 * Retrieves the color code from this gene set.
 * Gene pattern is (B/b;Y/y;R/r;O/o;W/w).
 * there are over 81 base combiations
 * some are hand picked so this will be done as a massive coded list.
 * 
 * @param int index index of the first gene in the sequence
 *
 * @return String
 */
Genome.prototype.getGeneColor = function(index) {
	// clear up the string
	var geneOne = this.elementAt(index).toString().split('/');		// {[B], [b]}
	var geneTwo = this.elementAt(index+1).toString().split('/');	// {[Y], [y]}
	var geneThree = this.elementAt(index+2).toString().split('/');	// {[R], [r]}
	var geneFour = this.elementAt(index+3).toString().split('/');	// {[O], [o]}
	var geneFive = this.elementAt(index+4).toString().split('/');	// {[W], [w]}
	
	var geneString = "";
	
	// Sort it so we can get an exact match to the combination, not the order, of each pair:
	geneOne = geneOne.sort().reverse();
	geneTwo = geneTwo.sort().reverse();
	geneThree = geneThree.sort().reverse();
	geneFour = geneFour.sort().reverse();
	geneFive = geneFive.sort().reverse();
	
	// build a clean string with no seperators:
	geneString += geneOne[0];
	geneString += geneOne[1];
	geneString += geneTwo[0];
	geneString += geneTwo[1];
	geneString += geneThree[0];
	geneString += geneThree[1];
	geneString += geneFour[0];
	geneString += geneFour[1];
	
	var Results = "";
	
	Results += geneFive[0];
	Results += geneFive[1];
	
	// get the intensity from gene W
	switch (Results) {
	case "WW":
		//Results = "bright ";
		//break;
	case "ww":
		//Results = "dark ";
		//break;
	default:
		Results = "";
		break;
	}
	// now the bastard monster switch
	
	switch (geneString) {
	case "bByyrRoO":
		geneString = "Gold";
		break;
	case "bbyyrROO":
		geneString = "PeachPuff";
		break;
	case "bByyrROO":
		geneString = "YellowGreen";
		break;
	case "BByYrRoO":
		geneString = "GreenYellow";
		break;
	case "bbyyrroO":
		geneString = "Chartreuse";
		break;
	case "bbyyrrOO":
		geneString = "OliveDrab";
		break;
	case "bbyYrRoO":
		geneString = "Moccasin";
		break;
	case "BByyrROO":
		geneString = "Yellow";
		break;
	case "bbyYrroo":
		geneString = "Khaki";
		break;
	case "bbYYrroo":
		geneString = "PaleGoldenRod";
		break;
	case "bByyrRoo":
		geneString = "Thistle";
		break;
	case "bByYrRoO":
		geneString = "Violet";
		break;
	case "bBYYrROO":
		geneString = "RebeccaPurple";
		break;
	case "bBYYrroO":
		geneString = "Plum";
		break;
	case "bBYYrrOO":
		geneString = "Lavender";
		break;
	case "bByYrRoo":
		geneString = "Purple";
		break;
	case "bBYYRRoO":
		geneString = "Magenta";
		break;
	case "bBYYRROO":
		geneString = "Fuchsia";
		break;
	case "bBYYRRoo":
		geneString = "Orchid";
		break;
	case "bBYYrRoO":
		geneString = "OrangeRed";
		break;
	case "BBYYrRoO":
		geneString = "Tomato";
		break;
	case "bbyyrroo":
		geneString = "Chocolate";
		break;
	case "bBYYrRoo":
		geneString = "Red";
		break;
	case "BByYrRoo":
		geneString = "FireBrick";
		break;
	case "BBYYrRoo":
		geneString = "Crimson";
		break;
	case "BByyrRoo":
		geneString = "IndianRed";
		break;
	case "BByyrRoO":
		geneString = "Salmon";
		break;
	case "BByYRRoO":
		geneString = "LightCoral";
		break;
	case "BBYYRRoO":
		geneString = "DarkSalmon";
		break;
	case "BByYRROO":
		geneString = "Red";
		break;
	case "BByyRRoO":
		geneString = "Maroon";
		break;
	case "BBYYRROO":
		geneString = "MediumVioletRed";
		break;
	case "BBYYRRoo":
		geneString = "DeepPink";
		break;
	case "BByyRROO":
		geneString = "HotPink";
		break;
	case "BByyRRoo":
		geneString = "Pink";
		break;
	case "bbyyrRoo":
		geneString = "Tomato";
		break;
	case "bbyyrRoO":
		geneString = "Coral";
		break;
	case "BByYRRoo":
		geneString = "orange";
		break;
	case "bbyyRRoO":
		geneString = "orange";
		break;
	case "bbyyRROO":
		geneString = "orange";
		break;
	case "bbyyRRoo":
		geneString = "orange";
		break;
	case "bByYrROO":
		geneString = "SpringGreen";
		break;
	case "bbyYrroO":
		geneString = "OliveDrab";
		break;
	case "bbYYrroO":
		geneString = "SeaGreen";
		break;
	case "bbyYrrOO":
		geneString = "ForestGreen";
		break;
	case "bbYYrrOO":
		geneString = "Green";
		break;
	case "bByyrroo":
		geneString = "SandyBrown";
		break;
	case "bbYYrRoo":
		geneString = "Chocolate";
		break;
	case "bByYrroo":
		geneString = "Brown";
		break;
	case "bbYYrRoO":
		geneString = "Brown";
		break;
	case "bbyYrRoo":
		geneString = "Brown";
		break;
	case "bbyYrROO":
		geneString = "Brown";
		break;
	case "bBYYrroo":
		geneString = "Sienna";
		break;
	case "bbYYrROO":
		geneString = "Sienna";
		break;
	case "bbyYRRoO":
		geneString = "Tan";
		break;
	case "BByYrroo":
		geneString = "BurlyWood";
		break;
	case "bbYYRRoO":
		geneString = "RosyBrown";
		break;
	case "bbyYRROO":
		geneString = "SandyBrown";
		break;
	case "bbyYRRoo":
		geneString = "DarkGoldenRod";
		break;
	case "BBYYrroo":
		geneString = "Tan";
		break;
	case "BByyrroo":
		geneString = "BurlyWood";
		break;
	case "bbYYRROO":
		geneString = "BlanchedAlmond";
		break;
	case "bbYYRRoo":
		geneString = "Cornsilk";
		break;
	case "bByyrroO":
		geneString = "CornflowerBlue";
		break;
	case "bByyrrOO":
		geneString = "BlueViolet";
		break;
	case "bByYrroO":
		geneString = "SlateBlue";
		break;
	case "bByYrrOO":
		geneString = "Indigo";
		break;
	case "BByYrroO":
		geneString = "RoyalBlue";
		break;
	case "BBYYrroO":
		geneString = "BlueViolet";
		break;
	case "BByYrrOO":
		geneString = "BlueViolet";
		break;
	case "BByyrroO":
		geneString = "BlueViolet";
		break;
	case "BBYYrrOO":
		geneString = "BlueViolet";
		break;
	case "BByyrrOO":
		geneString = "MediumPurple";
		break;
	case "bByyRRoO":
		geneString = "SteelBlue";
		break;
	case "bByyRROO":
		geneString = "SkyBlue";
		break;
	case "bByyRRoo":
		geneString = "DodgerBlue";
		break;
	case "bByYRRoO":
		geneString = "Blue";
		break;
	case "bByYRROO":
		geneString = "MidnightBlue";
		break;
	case "bByYRRoo":
		geneString = "RoyalBlue";
		break;
	case "BByYrROO":
		geneString = "CornflowerBlue";
		break;
	case "BBYYrROO":
		geneString = "Navy";
		break;
	}
	
	return Results + " " + geneString; 
};

/**
 * Retrieves the gene determining coat color
 *
 * This is defined as genes 17, 18, 19, 20, 21 (B/b;Y/y;R/r;O/o;W/w).
 *
 * @return Genome
 */
Genome.prototype.getCoatColor = function() {
	return Genome.fromString(this.elementAt(17).toString() + ";" + this.elementAt(18).toString() + ";" + this.elementAt(19).toString() + ";" + this.elementAt(20).toString() + ";" + this.elementAt(21).toString());
};

/**
 * Retrieves the gene determining mane color
 *
 * This is defined as genes 22, 23, 24, 25, 26 (B/b;Y/y;R/r;O/o;W/w).
 *
 * @return Genome
 */
Genome.prototype.getManeColor = function() {
	return Genome.fromString(this.elementAt(22).toString() + ";" + this.elementAt(23).toString() + ";" + this.elementAt(24).toString() + ";" + this.elementAt(25).toString() + ";" + this.elementAt(26).toString());
};

/**
 * Retrieves the gene determining eye color
 *
 * This is defined as genes 27, 28, 29, 30, 31 (B/b;Y/y;R/r;O/o;W/w).
 *
 * @return Genome
 */
Genome.prototype.getEyeColor = function() {
	return Genome.fromString(this.elementAt(27).toString() + ";" + this.elementAt(28).toString() + ";" + this.elementAt(29).toString() + ";" + this.elementAt(30).toString() + ";" + this.elementAt(31).toString() );
};

/**
 * Retrieves returns a string name for the coat color gene
 *
 * @return String
 */
Genome.prototype.getCoatColorString = function() {
	return this.getGeneColor(17);
}

/**
 * Retrieves returns a string name for the mane color gene
 *
 * @return String
 */
Genome.prototype.getManeColorString = function() {
	return this.getGeneColor(22);
}

/**
 * Retrieves returns a string name for the eye color gene
 *
 * @return String
 */
Genome.prototype.getEyeColorString = function() {
	return this.getGeneColor(27);
}



/**
 * Retrieves the gene determining the Strong stat.
 * This is defined as genes 32, 33 (S/s;T/t).
 *
 * @return Int
 */
Genome.prototype.getStrong= function() {
	return (this.doublePhenotype(32, "S/T") + 1);
}
/**
 * Retrieves the gene determining the Strong stat.
 *
 * This is defined as genes 32, 33 (S/s;T/t).
 *
 * @return Genome
 */
Genome.prototype.getStrongGene = function() {
	return Genome.fromString(this.elementAt(32).toString() + ";" + this.elementAt(33).toString());
};


/**
 * Retrieves the gene determining the Energy stat.
 * This is defined as genes 34, 35 (E/e;N/n).
 *
 * @return Int
 */
Genome.prototype.getEnergy = function() {
	return (this.doublePhenotype(34, "E/N") + 1);
}
/**
 * Retrieves the gene determining the Energy stat.
 *
 * This is defined as genes 34, 35 (E/e;N/n).
 *
 * @return Genome
 */
Genome.prototype.getEnergyGene = function() {
	return Genome.fromString(this.elementAt(34).toString() + ";" + this.elementAt(35).toString());
};


/**
 * Retrieves the gene determining the Charm stat.
This is defined as genes 36, 37 (C/c;H/h).
 *
 * @return Int
 */
Genome.prototype.getCharm= function() {
	return (this.doublePhenotype(36, "C/H") + 1);
}
/**
 * Retrieves the gene determining the Charm stat.
 * This is defined as genes 36, 37 (C/c;H/h).
 *
 * @return Genome
 */
Genome.prototype.getCharmGene = function() {
	return Genome.fromString(this.elementAt(36).toString() + ";" + this.elementAt(37).toString());
};


/**
 * Retrieves the gene determining the Thinking stat.
This is defined as genes 38, 39 (T/t;H/h).
 *
 * @return Int
 */
Genome.prototype.getThinking = function() {
	return (this.doublePhenotype(38, "T/H") + 1);
}
/**
 * Retrieves the gene determining the Thinking stat.
 * This is defined as genes 38, 39 (T/t;H/h).
 *
 * @return Genome
 */
Genome.prototype.getThinkingGene = function() {
	return Genome.fromString(this.elementAt(38).toString() + ";" + this.elementAt(39).toString());
};


/**
 * Retrieves the gene determining the Learning stat.
This is defined as genes 40, 41 (L/l;E/e).
 *
 * @return Int
 */
Genome.prototype.getLearning= function() {
	return (this.doublePhenotype(40, "L/E") + 1);
}
/**
 * Retrieves the gene determining the Learning stat.
 * This is defined as genes 40, 41 (L/l;E/e).
 *
 * @return Genome
 */
Genome.prototype.getLearningGene = function() {
	return Genome.fromString(this.elementAt(40).toString() + ";" + this.elementAt(41).toString());
};</script><tw-passagedata pid="1" name="sugarCubeConfig" tags="Config" position="609,9" size="100,100">:: SugarCube configuration [script]


/* Main SugarCube configuration file. */

/* Change the starting passage from the default &#39;start&#39; to &#39;Alpha disclaimer&#39;. */
Config.passages.start = &quot;init&quot;;

/* Disable forward/back buttons in panel. */
Config.history.controls = false;

/* Set Autosaves. */
config.saves.autosave = &quot;autosave&quot;;

/* Save only one game state. */
Config.history.maxStates = 1;

/* Set to &#39;true&#39; to enable SugarCube&#39;s debug mode.
Note: This is an &#39;engine level&#39; debug mode, completely separate from the game&#39;s debug mode. */
Config.debug = false;</tw-passagedata><tw-passagedata pid="2" name="Disclaimer" tags="nobr" position="900,402" size="100,100">&lt;&lt;set $ui = &quot;disclaimer&quot;&gt;&gt;
//version $ver build $releaseID//
&lt;br&gt;
&#39;&#39;This is an alpha.&#39;&#39; That means the game is missing content, is full of bugs, is imbalanced, and is generally in an incomplete state. The game will keep a start of turn autosave. If you encounter a bug, I strongly recommend you reload your start of turn autosave immediately. 
&lt;br&gt;
@@.yellow;This is a text-based game that includes descriptions of fantastic animal abuse and other subjects not suitable for persons under the age of 18. This is a work of fiction; any resemblance to actual persons, places, or events is unintended.@@
&lt;br&gt;
&lt;br&gt;[[I am 18 or more years of age, I understand, and I wish to continue|Intro Summary]]
</tw-passagedata><tw-passagedata pid="3" name="fluffy creation widgets" tags="widget nobr" position="507,204" size="100,100">/%
	Base Fluffy Template.
	Call as &lt;&lt;BaseFluffy&gt;&gt;
%/

&lt;&lt;widget &quot;BaseFluffy&quot;&gt;&gt;
	&lt;&lt;if ($args[0].toUpperCase() == &quot;MALE&quot;)&gt;&gt;
		&lt;&lt;set _geneSTR = &quot;X/Y;A/a;B/b;C/c;E/e;F/f;G/g;H/h;J/j;K/k;M/m;N/n;S/s;X/x;E/e;P/a;U/a;B/b;Y/y;R/r;O/o;W/w;B/b;Y/y;R/r;O/o;W/w;B/b;Y/y;R/r;O/o;W/w;S/s;T/t;E/e;N/n;C/c;H/h;T/t;H/h;L/l;E/e&quot;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set _geneSTR = &quot;X/X;A/a;B/b;C/c;E/e;F/f;G/g;H/h;J/j;K/k;M/m;N/n;S/s;X/x;E/e;P/a;U/a;B/b;Y/y;R/r;O/o;W/w;B/b;Y/y;R/r;O/o;W/w;B/b;Y/y;R/r;O/o;W/w;S/s;T/t;E/e;N/n;C/c;H/h;T/t;H/h;L/l;E/e&quot;&gt;&gt;
	&lt;&lt;/if&gt;&gt;

	&lt;&lt;set $activeFluffy = {
		name: &quot;This fluffy&quot;,
		geneString: _geneSTR,
		genes: Genome.fromString(_geneSTR),
		weekAcquired: 0,
		origin: 0,
		ID: 0,
		gender: &quot;&quot;,
		length: 33,
		maxLength: 33,
		lengthAdd: 0, 
		height: 19.47,
		maxHeight: 19.47,
		heightMulti: 0.59,
		heightAdd: 0.00,
		weight: 3.135,
		maxWeight: 3.135,
		weightMulti: 0.095,
		maxAge: 10,
		age: 1,
		ageWeeks: 52,  
		maxFertility: 4,
		fertility: 4,
		fertilityAdd: 0,
		maxMaturity: 40,
		maturity: 40,
		maturityAdd: 0,
		breed: &quot;Earthy&quot;,
		cColor: &quot;Violet&quot;,
		mColor: &quot;Violet&quot;,
		eColor: &quot;Violet&quot;,
		mother: -1,
		father: -1,
		strong: 3,
		energy: 3,
		charm: 3,
		thinking: 3,
		learning: 3,
		health: 10,
		children: [],
		specialFriend: -1,
		pregnant: false,
		nursing: false		
	}
	&gt;&gt;
&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget &quot;newFromGene&quot;&gt;&gt;
	&lt;&lt;if $args.length == true&gt;&gt;

		&lt;&lt;set _l = random(0, 1)&gt;&gt;
		&lt;&lt;set _f = random(0, 1)&gt;&gt;
		&lt;&lt;set _h = random(0, 2) / 100&gt;&gt;
		&lt;&lt;set _m = random(0, 2)&gt;&gt;

		&lt;&lt;set _L = Number($args[0].getLength() + _l).toFixed(2)&gt;&gt;
		&lt;&lt;set _H = Number(($args[0].getHeight() + _h) * _L).toFixed(2)&gt;&gt;
		&lt;&lt;set _W = Number($args[0].getWeight() * _L).toFixed(2)&gt;&gt;

		&lt;&lt;set $activeFluffy = {
			name: &quot;This fluffy&quot;,
			geneString: $args[0].toString(),
			genes: $args[0],
			weekAcquired: 0,
			origin: 0,
			ID: -1,
			gender: $args[0].getGenderString().toLowerCase(),
			length: Number(random((_L*0.85),_L)).toFixed(2),
			maxLength: _L,
			lengthAdd: _l, 
			height: 0,
			maxHeight: _H,
			height: Number(random((_H*0.95),_H)).toFixed(2),
			heightMulti: $args[0].getHeight() + _h,
			heightAdd: _h,
			weight: Number((_W*.79), _W).toFixed(2),
			maxWeight: _W,
			weightMulti: $args[0].getWeight(),
			maxAge: $args[0].getMaxAge(),
			age: 0,
			ageWeeks: 0,  
			maxFertility: $args[0].getFertility() + _f,
			fertility: $args[0].getFertility() + _f,
			fertilityAdd: _f,
			maxMaturity: $args[0].getMaturity() + _m,
			maturity: $args[0].getMaturity() + _m,
			maturityAdd: _m,
			breed: $args[0].getBreedString().toLowerCase(),
			cColor: $args[0].getCoatColorString(),
			mColor: $args[0].getManeColorString(),
			eColor: $args[0].getEyeColorString(),
			strong: $args[0].getStrong(),
			energy: $args[0].getEnergy(),
			charm: $args[0].getCharm(),
			thinking: $args[0].getThinking(),
			learning: $args[0].getLearning(),
			health: 10,
			children: [],
			specialFriend: -1,
			pregnant: false,
			nursing: false		
		} &gt;&gt;

		&lt;&lt;set _rAge = random($activeFluffy.maturity, ($activeFluffy.maturity*2))&gt;&gt;
		&lt;&lt;set $activeFluffy.age = Math.round(_rAge/52)&gt;&gt;
		&lt;&lt;set $activeFluffy.ageWeeks = Math.max(_rAge-($activeFluffy.age*52), 0)&gt;&gt;

		&lt;&lt;switch $alicornRarity&gt;&gt;
		&lt;&lt;case 0&gt;&gt;
			&lt;&lt;if $activeFluffy.breed.toUpperCase() == &quot;SETTING_DEPENDENT_BREED&quot;&gt;&gt;
				&lt;&lt;set $activeFluffy.breed = &quot;alicorn&quot;&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			&lt;&lt;if $activeFluffy.breed.toUpperCase() == &quot;SETTING_DEPENDENT_BREED&quot;&gt;&gt;
				&lt;&lt;if random(0, 1) == 0&gt;&gt;
					&lt;&lt;set $activeFluffy.breed = &quot;unicorn&quot;&gt;&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;set $activeFluffy.breed = &quot;pegasus&quot;&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;default&gt;&gt;
			&lt;&lt;if $activeFluffy.breed.toLowerCase() == &quot;alicorn&quot; or $activeFluffy.breed.toUpperCase() == &quot;SETTING_DEPENDENT_BREED&quot;&gt;&gt;
				&lt;&lt;switch random(0, 5)&gt;&gt;
				&lt;&lt;case 0 1&gt;&gt;
					&lt;&lt;set $activeFluffy.breed = &quot;unicorn&quot;&gt;&gt;
				&lt;&lt;case 2 3&gt;&gt;
					&lt;&lt;set $activeFluffy.breed = &quot;pegasus&quot;&gt;&gt;
				&lt;&lt;case 4&gt;&gt;
					&lt;&lt;set $activeFluffy.breed = &quot;earthy&quot;&gt;&gt;
				&lt;&lt;case 5&gt;&gt;
					&lt;&lt;set $activeFluffy.breed = &quot;alicorn&quot;&gt;&gt;
				&lt;&lt;/switch&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/switch&gt;&gt;

	&lt;&lt;else&gt;&gt;
		&lt;br&gt;&lt;br&gt;@@.red; newFromGene called with no gene.@@&lt;br&gt;&lt;br&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;Focus&quot;&gt;&gt;
	&lt;&lt;if $args.length == true&gt;&gt;
		&lt;&lt;set $activeFluffy = $args[0]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;breedFluffies&quot;&gt;&gt;
	&lt;&lt;if $args.length != 2&gt;&gt;
		&lt;br&gt;&lt;br&gt;@@.red; breedFluffies called without 2 parents.@@&lt;br&gt;&lt;br&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;set _mom = $args[0]&gt;&gt;
	&lt;&lt;set _dad = $args[1]&gt;&gt;
	&lt;&lt;set _mom.genes = Genome.fromString(_mom.geneString)&gt;&gt;
	&lt;&lt;set _dad.genes = Genome.fromString(_dad.geneString)&gt;&gt;

	&lt;&lt;set $childGene = _mom.genes.breedWithGenome(_dad.genes)&gt;&gt;

	&lt;&lt;newFromGene $childGene&gt;&gt;
	
	&lt;&lt;set $activeFluffy.mother = _mom.ID&gt;&gt;
	&lt;&lt;set $activeFluffy.dad = _dad.ID&gt;&gt;
	&lt;&lt;newFoal&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;newFoal&quot;&gt;&gt;
	&lt;&lt;set $activeFluffy.age = 0&gt;&gt;
	&lt;&lt;set $activeFluffy.ageWeeks = 0&gt;&gt;
	&lt;&lt;set $activeFluffy.height = Number($activeFluffy.maxHeight * 0.22).toFixed(2)&gt;&gt;
	&lt;&lt;set $activeFluffy.length = Number($activeFluffy.maxLength * 0.22).toFixed(2)&gt;&gt;
	&lt;&lt;set $activeFluffy.weight = Number($activeFluffy.maxWeight * 0.0286).toFixed(3)&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;rememberFluffy&quot;&gt;&gt;
	&lt;&lt;set $fID++&gt;&gt;
	&lt;&lt;set $activeFluffy.ID = $fID&gt;&gt;
	&lt;&lt;set $allFluffies[$fID] = $activeFluffy&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;inlineColor&quot;&gt;&gt;&lt;&lt;- &quot;@@color:&quot;+$args[0]+&quot;;&quot;+$args[0]&gt;&gt;&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="4" name="pronoun widgets" tags="widget nobr" position="403,99" size="100,100">&lt;&lt;widget &quot;they&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;he&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;she&lt;&lt;else&gt;&gt;they&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;them&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;him&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;her&lt;&lt;else&gt;&gt;them&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;themself&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;himself&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;herself&lt;&lt;else&gt;&gt;themself&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;themselves&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;themselves&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;themselves&lt;&lt;else&gt;&gt;themselves&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;their&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;his&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;her&lt;&lt;else&gt;&gt;their&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;theirs&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;his&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;hers&lt;&lt;else&gt;&gt;theirs&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;theyre&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;he&#39;s&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;she&#39;s&lt;&lt;else&gt;&gt;they&#39;re&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;They&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;He&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;She&lt;&lt;else&gt;&gt;They&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;Them&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;Him&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;Her&lt;&lt;else&gt;&gt;Them&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;Themself&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;Himself&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;Herself&lt;&lt;else&gt;&gt;Themself&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;Themselves&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;Themselves&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;Themselves&lt;&lt;else&gt;&gt;Themselves&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;Their&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;His&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;Her&lt;&lt;else&gt;&gt;Their&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;Theirs&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;His&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;Hers&lt;&lt;else&gt;&gt;Theirs&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;Theyre&quot;&gt;&gt;&lt;&lt;if $activeFluffy.gender eq &quot;male&quot;&gt;&gt;He&#39;s&lt;&lt;elseif $activeFluffy.gender eq &quot;female&quot;&gt;&gt;She&#39;s&lt;&lt;else&gt;&gt;They&#39;re&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="5" name="Intro Summary" tags="nobr" position="901,603" size="100,100">You may review your settings before clicking &quot;Continue&quot; to begin.

&lt;br&gt;
&lt;br&gt;__&#39;&#39;World Settings&#39;&#39;__

&lt;&lt;if ($economy != 1) || ($alicornRarity != 1) || ($alicornMonster != 1) || ($pooBaby != 1) || ($smartySyndrom != 1)&gt;&gt;
	//[[restore defaults|Intro Summary][$economy = 1, $alicornRarity = 1, $alicornMonster = 1, $pooBaby = 1, $smartySyndrom = 1]]//
&lt;&lt;/if&gt;&gt;

&lt;br&gt;
&lt;br&gt;In the years since the BioToys known as Fluffies were released from HasBio labs, the world has been greatly changed by this new addition.
&lt;br&gt;@@.orange;In this world, Fluffies are: @@
&lt;br&gt;
&lt;&lt;if $economy == 1&gt;&gt;
	Common pests.
	[[Easier|Intro Summary][$economy = 0]] | [[Harder|Intro Summary][$economy = 2]]
&lt;&lt;elseif $economy == 0&gt;&gt;
	Common children&#39;s biotoys.
	[[Harder|Intro Summary][$economy = 1]]
&lt;&lt;else&gt;&gt;
	An economical and ecological nightmare.
	[[Easier|Intro Summary][$economy = 1]]
&lt;&lt;/if&gt;&gt;

&lt;br&gt; 
&lt;br&gt;Fluffies have four breeds.  The most common, Earthies have no special features.  Less common are Pegasi, with (non functional) wings, and Unicorns, with small horns. The rarest breed is the Alicorn, having both wings and a horn.
&lt;br&gt;@@.orange;In this world, Alicorns are @@
&lt;br&gt;
&lt;&lt;if $alicornRarity == 1&gt;&gt;
	Rare and difficult to breed.
	[[More Common|Intro Summary][$alicornRarity = 0]] | [[Less Common|Intro Summary][$alicornRarity = 2]]
&lt;&lt;elseif $alicornRarity == 0&gt;&gt;
	Uncommon, but can be bred for.
	[[Less Common|Intro Summary][$alicornRarity = 1]]
&lt;&lt;else&gt;&gt;
	Very rare even with alicorn parents. 
	[[More Common|Intro Summary][$alicornRarity = 1]]
&lt;&lt;/if&gt;&gt;

&lt;br&gt;
&lt;br&gt;Fluffies are known to reject Alicorns as monsters, abandoning or killing them, making an already rare breed even rarer. &lt;br&gt;@@.orange;This &#39;monster&#39; treament is @@
&lt;br&gt;
&lt;&lt;if $alicornMonster == 1&gt;&gt;
	A big problem, and training alicorn safe fluffies is difficult.
	[[Easier|Intro Summary][$alicornMonster = 0]] | [[Harder|Intro Summary][$alicornMonster = 2]]
&lt;&lt;elseif $alicornMonster == 0&gt;&gt;
	A nuisance, so long as you put in a bit of training to correct the issue.
	[[Harder|Intro Summary][$alicornMonster = 1]]
&lt;&lt;else&gt;&gt;
	Genetically programmed in, requiring hand raising of rejected foals.
	[[Easier|Intro Summary][$alicornMonster = 1]]
&lt;&lt;/if&gt;&gt;

&lt;br&gt;
&lt;br&gt;Fluffies are also known to reject babies with bad colors, especially greens and browns - so called poopy babies.  
&lt;br&gt;@@.orange;This poopie babbeh treatment is @@
&lt;br&gt;
&lt;&lt;if $pooBaby == 1&gt;&gt;
	part of the default programing, but this can normally be corrected with care and time.
	[[Easier|Intro Summary][$pooBaby = 0]] | [[Harder|Intro Summary][$pooBaby = 2]]
&lt;&lt;elseif $pooBaby == 0&gt;&gt;
	a earned behaviour which takes little effort to correct.
	[[Harder|Intro Summary][$pooBaby = 1]]
&lt;&lt;else&gt;&gt;
	Genetically programmed in, requiring hand raising of rejected foals.
	[[Easier|Intro Summary][$pooBaby = 1]]
&lt;&lt;/if&gt;&gt;

&lt;br&gt;
&lt;br&gt;Smarty Syndrome is a form of mental illness, resulting in narcissistic behaviour and can even result in a fluffy attacking humans and foals!
&lt;br&gt;@@.orange;Smarty Syndrome is @@
&lt;br&gt;
&lt;&lt;if $smartySyndrom == 1&gt;&gt;
	dangerous if left untreated.
	[[Easier|Intro Summary][$smartySyndrom = 0]] | [[Harder|Intro Summary][$smartySyndrom = 2]]
&lt;&lt;elseif $smartySyndrom == 0&gt;&gt;
	just the result of spoiled upbring and a lack of discipline
	[[Harder|Intro Summary][$smartySyndrom = 1]]
&lt;&lt;else&gt;&gt;
	a menace!  Hell-gremlins must die. @@.orange;Unlocks hell-gremlin content.@@
	[[Easier|Intro Summary][$smartySyndrom = 1]]
&lt;&lt;/if&gt;&gt;
&lt;br&gt;

&lt;br&gt;
&lt;br&gt;[[Continue|Shop Intro][$showStartingExplanation = 1, $customDad = &quot;&quot;, $customMom = &quot;&quot;, $outShopping = false, $storePoints = (11 - ($smartySyndrom + $pooBaby + $alicornMonster + $alicornRarity + $economy)) * 100]]
&lt;br&gt;
&lt;br&gt;
[[Cheat Start|Shop Intro][$storePoints = (11 - ($smartySyndrom + $pooBaby + $alicornMonster + $alicornRarity + $economy)) * 100000, $ourStore.fluffies = [], $showStartingExplanation = 1, $customDad = &quot;&quot;, $customMom = &quot;&quot;, $outShopping = false]] | //Intended for debugging: may have unexpected effects//
</tw-passagedata><tw-passagedata pid="6" name="Shop Intro" tags="nobr" position="790,749" size="100,100">&lt;br&gt;You will need a location to house, breed and sell fluffies.
&lt;br&gt;
&lt;br&gt;What kind of shop will you start with? @@.orange;Press &#39;enter&#39; to set values.@@
&lt;br&gt;
&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.
&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;
&lt;br&gt;
&lt;br&gt;Store Name: &lt;&lt;textbox &quot;$ourStore.name&quot; $ourStore.name &quot;Shop Intro&quot;&gt;&gt; The name of your store.
&lt;br&gt;
&lt;br&gt;Space: &lt;span id=&quot;stats-space&quot;&gt;&lt;&lt;print $ourStore.space&gt;&gt;&lt;/span&gt; How much space you have for upgrades. 
( &lt;&lt;link &quot;[+]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 0&gt;&gt;&lt;&lt;set $storePoints--&gt;&gt;&lt;&lt;set $ourStore.space++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-space&quot;&gt;&gt;&lt;&lt;print $ourStore.space&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-]&quot;&gt;&gt;&lt;&lt;if $ourStore.space &gt; 0&gt;&gt;&lt;&lt;set $storePoints++&gt;&gt;&lt;&lt;set $ourStore.space--&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-space&quot;&gt;&gt;&lt;&lt;print $ourStore.space&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
( &lt;&lt;link &quot;[+10]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 9&gt;&gt;&lt;&lt;set $storePoints -= 10&gt;&gt;&lt;&lt;set $ourStore.space +=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-space&quot;&gt;&gt;&lt;&lt;print $ourStore.space&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-10]&quot;&gt;&gt;&lt;&lt;if $ourStore.space &gt; 9&gt;&gt;&lt;&lt;set $storePoints +=10&gt;&gt;&lt;&lt;set $ourStore.space -=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-space&quot;&gt;&gt;&lt;&lt;print $ourStore.space&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;
&lt;br&gt;Shelter: &lt;span id=&quot;stats-shelter&quot;&gt;&lt;&lt;print $ourStore.shelter&gt;&gt;&lt;/span&gt; How many adult fluffies you can hold.
( &lt;&lt;link &quot;[+]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 0&gt;&gt;&lt;&lt;set $storePoints--&gt;&gt;&lt;&lt;set $ourStore.shelter++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-shelter&quot;&gt;&gt;&lt;&lt;print $ourStore.shelter&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-]&quot;&gt;&gt;&lt;&lt;if $ourStore.shelter &gt; 0&gt;&gt;&lt;&lt;set $storePoints++&gt;&gt;&lt;&lt;set $ourStore.shelter--&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-shelter&quot;&gt;&gt;&lt;&lt;print $ourStore.shelter&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
( &lt;&lt;link &quot;[+10]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 9&gt;&gt;&lt;&lt;set $storePoints -= 10&gt;&gt;&lt;&lt;set $ourStore.shelter +=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-shelter&quot;&gt;&gt;&lt;&lt;print $ourStore.shelter&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-10]&quot;&gt;&gt;&lt;&lt;if $ourStore.shelter &gt; 9&gt;&gt;&lt;&lt;set $storePoints +=10&gt;&gt;&lt;&lt;set $ourStore.shelter -=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-shelter&quot;&gt;&gt;&lt;&lt;print $ourStore.shelter&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;
&lt;br&gt;Display: &lt;span id=&quot;stats-display&quot;&gt;&lt;&lt;print $ourStore.display&gt;&gt;&lt;/span&gt; How many fluffies you can have for sale at once.
( &lt;&lt;link &quot;[+]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 0&gt;&gt;&lt;&lt;set $storePoints--&gt;&gt;&lt;&lt;set $ourStore.display++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-display&quot;&gt;&gt;&lt;&lt;print $ourStore.display&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-]&quot;&gt;&gt;&lt;&lt;if $ourStore.display &gt; 0&gt;&gt;&lt;&lt;set $storePoints++&gt;&gt;&lt;&lt;set $ourStore.display--&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-display&quot;&gt;&gt;&lt;&lt;print $ourStore.display&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
( &lt;&lt;link &quot;[+10]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 9&gt;&gt;&lt;&lt;set $storePoints -= 10&gt;&gt;&lt;&lt;set $ourStore.display +=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-display&quot;&gt;&gt;&lt;&lt;print $ourStore.display&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-10]&quot;&gt;&gt;&lt;&lt;if $ourStore.display &gt; 9&gt;&gt;&lt;&lt;set $storePoints +=10&gt;&gt;&lt;&lt;set $ourStore.display -=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-display&quot;&gt;&gt;&lt;&lt;print $ourStore.display&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;
&lt;br&gt;Storage: &lt;span id=&quot;stats-storage&quot;&gt;&lt;&lt;print $ourStore.storage&gt;&gt;&lt;/span&gt; How much room you have for supplies (such as food)
( &lt;&lt;link &quot;[+]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 0&gt;&gt;&lt;&lt;set $storePoints--&gt;&gt;&lt;&lt;set $ourStore.storage++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-storage&quot;&gt;&gt;&lt;&lt;print $ourStore.storage&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-]&quot;&gt;&gt;&lt;&lt;if $ourStore.storage &gt; 0&gt;&gt;&lt;&lt;set $storePoints++&gt;&gt;&lt;&lt;set $ourStore.storage--&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-storage&quot;&gt;&gt;&lt;&lt;print $ourStore.storage&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
( &lt;&lt;link &quot;[+10]&quot;&gt;&gt;&lt;&lt;if $storePoints &gt; 9&gt;&gt;&lt;&lt;set $storePoints -= 10&gt;&gt;&lt;&lt;set $ourStore.storage +=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-storage&quot;&gt;&gt;&lt;&lt;print $ourStore.storage&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link &quot;[-10]&quot;&gt;&gt;&lt;&lt;if $ourStore.storage &gt; 9&gt;&gt;&lt;&lt;set $storePoints +=10&gt;&gt;&lt;&lt;set $ourStore.storage -=10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#stats-storage&quot;&gt;&gt;&lt;&lt;print $ourStore.storage&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#shop_cash&quot;&gt;&gt;&lt;span id = &quot;shop_cash&quot;&gt;&lt;br&gt;You have @@.cyan; $storePoints .@@ points left.&lt;br&gt;Remaining points will become &lt;&lt;print $storePoints+100&gt;&gt; cash.&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;[[Get Fluffies|Fluffy Intro][$cash = $storePoints + 100, $customDad = &quot;&quot;, $customMom = &quot;&quot;, $showStartingExplanation = 0]]

&lt;&lt;switch $economy&gt;&gt;
&lt;&lt;case 0&gt;&gt;
&lt;&lt;set _cosMulti = 1&gt;&gt;
&lt;&lt;case 1&gt;&gt;
&lt;&lt;set _cosMulti = 1.25&gt;&gt;
&lt;&lt;case 2&gt;&gt;
&lt;&lt;set _cosMulti = 1.75&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;&lt;set $basePrice = { earthy: 0.50, unicorn: 0.75, pegasus: 0.75, alicorn: Number(2 + (($alicornMonster + $alicornRarity) / 4)).toFixed(2) }&gt;&gt;
&lt;&lt;set $priceTeir = { mill: Number(1*_cosMulti).toFixed(2), mart: Number(40*_cosMulti).toFixed(2), deluxe: Number(800*_cosMulti).toFixed(2) }&gt;&gt;
&lt;&lt;set $earthPrice = { mill: Number($basePrice.earthy*$priceTeir.mill).toFixed(2), mart: Number($basePrice.earthy*$priceTeir.mart).toFixed(2), deluxe: Number($basePrice.earthy*$priceTeir.deluxe).toFixed(2) }&gt;&gt;
&lt;&lt;set $unicornPrice = { mill: Number($basePrice.unicorn*$priceTeir.mill).toFixed(2), mart: Number($basePrice.unicorn*$priceTeir.mart).toFixed(2), deluxe: Number($basePrice.unicorn*$priceTeir.deluxe).toFixed(2) }&gt;&gt;
&lt;&lt;set $pegasusPrice = { mill: Number($basePrice.pegasus*$priceTeir.mill).toFixed(2), mart: Number($basePrice.pegasus*$priceTeir.mart).toFixed(2), deluxe: Number($basePrice.pegasus*$priceTeir.deluxe).toFixed(2) }&gt;&gt;
&lt;&lt;set $alicornPrice = { mill: -1, mart: -1, deluxe: Number($basePrice.alicorn*$priceTeir.deluxe).toFixed(2) }&gt;&gt;
</tw-passagedata><tw-passagedata pid="7" name="Week Start" tags="nobr" position="1162,606" size="100,100">&lt;&lt;set $ui = &quot;main&quot;&gt;&gt;
&lt;br&gt;
&lt;br&gt;
&lt;&lt;set $nextButton = &quot;END WEEK&quot;, $nextLink = &quot;End Week&quot;, $showEncyclopedia = 1, $encyclopedia = &quot;How to Play&quot;&gt;&gt;

/* Saves use the first eight printed words to make the &quot;file name&quot;, the below line cheats and makes saves here nicer named. */
@@font-size: 0; $ourStore.name, Week $week, $ourStore.fluffies.length Fluffies, $cash     @@
&lt;br&gt;
&lt;br&gt;Your store, $ourStore.name, is open for business for the week.
&lt;br&gt;What would you like to do?
&lt;br&gt;@@.orange;Features still WIP.@@
&lt;br&gt;
&lt;br&gt;[[Check breeding pairs|Fluffy List]]
&lt;br&gt;//Interact with your fluffies.//
&lt;br&gt;//Buy supplies.//
&lt;br&gt;//Upgrade the shop.//
&lt;br&gt;
</tw-passagedata><tw-passagedata pid="8" name="StoryCaption" tags="" position="603,354.5" size="100,100">\
&lt;&lt;set _Pass = passage()&gt;&gt;\
&lt;&lt;if _Pass == &quot;Encyclopedia&quot;&gt;&gt;
&lt;&lt;elseif _Pass == &quot;Intro Summary&quot;&gt;&gt;\
	&lt;&lt;SidebarDate&gt;&gt;	
&lt;&lt;elseif _Pass == &quot;Shop Intro&quot;&gt;&gt;\
	&lt;&lt;SidebarDate&gt;&gt;
	&lt;&lt;SidebarWeather&gt;&gt;
&lt;&lt;elseif _Pass == &quot;Fluffy Intro&quot;&gt;&gt;\
	&lt;&lt;SidebarDate&gt;&gt;
	&lt;&lt;SidebarWeather&gt;&gt;
	&lt;&lt;SidebarCash&gt;&gt;
	&lt;&lt;SidebarStore&gt;&gt;
&lt;&lt;elseif _Pass == &quot;Food Intro&quot;&gt;&gt;\
	&lt;&lt;SidebarDate&gt;&gt;
	&lt;&lt;SidebarWeather&gt;&gt;
	&lt;&lt;SidebarCash&gt;&gt;
	&lt;&lt;SidebarFluffies&gt;&gt;
	&lt;&lt;SidebarStore&gt;&gt;
&lt;&lt;elseif $ui == &quot;main&quot;&gt;&gt;\
	&lt;&lt;SidebarDate&gt;&gt;
	&lt;&lt;SidebarWeather&gt;&gt;
	&lt;&lt;SidebarButton&gt;&gt;
	&lt;&lt;SidebarCash&gt;&gt;
	&lt;&lt;SidebarFluffies&gt;&gt;
	&lt;&lt;SidebarFood&gt;&gt;
	&lt;&lt;SidebarStore&gt;&gt;
&lt;&lt;nobr&gt;&gt;
 

&lt;br&gt;@@.green;Rep@@ |
&lt;&lt;set $rep = Math.clamp(Math.trunc($rep), 0, 20000)&gt;&gt;
&lt;span id=&quot;rep&quot;&gt;
&lt;&lt;if $rep &gt; 19000&gt;&gt;
	@@color:rgb(0,145,0);worshipped@@
&lt;&lt;elseif $rep &gt; 18000&gt;&gt;
	@@color:rgb(0,150,0);great@@
&lt;&lt;elseif $rep &gt; 17000&gt;&gt;
	@@color:rgb(0,155,0);exalted@@
&lt;&lt;elseif $rep &gt; 16000&gt;&gt;
	@@color:rgb(0,160,0);illustrious@@
&lt;&lt;elseif $rep &gt; 15000&gt;&gt;
	@@color:rgb(0,165,0);prestigious@@
&lt;&lt;elseif $rep &gt; 14000&gt;&gt;
	@@color:rgb(0,170,0);renowned@@
&lt;&lt;elseif $rep &gt; 13000&gt;&gt;
	@@color:rgb(0,175,0);famed@@
&lt;&lt;elseif $rep &gt; 12000&gt;&gt;
	@@color:rgb(0,180,0);celebrated@@
&lt;&lt;elseif $rep &gt; 11000&gt;&gt;
	@@color:rgb(0,185,0);honored@@
&lt;&lt;elseif $rep &gt; 10000&gt;&gt;
	@@color:rgb(0,190,0);acclaimed@@
&lt;&lt;elseif $rep &gt; 9000&gt;&gt;
	@@color:rgb(0,195,0);eminent@@
&lt;&lt;elseif $rep &gt; 8250&gt;&gt;
	@@color:rgb(0,200,0);prominent@@
&lt;&lt;elseif $rep &gt; 7000&gt;&gt;
	@@color:rgb(0,205,0);distinguished@@
&lt;&lt;elseif $rep &gt; 6750&gt;&gt;
	@@color:rgb(0,210,0);admired@@
&lt;&lt;elseif $rep &gt; 6000&gt;&gt;
	@@color:rgb(0,215,0);esteemed@@
&lt;&lt;elseif $rep &gt; 5250&gt;&gt;
	@@color:rgb(0,220,0);respected@@
&lt;&lt;elseif $rep &gt; 4500&gt;&gt;
	@@color:rgb(0,225,0);known@@
&lt;&lt;elseif $rep &gt; 3750&gt;&gt;
	@@color:rgb(0,230,0);recognized@@
&lt;&lt;elseif $rep &gt; 3000&gt;&gt;
	@@color:rgb(0,235,0);rumored@@
&lt;&lt;elseif $rep &gt; 2250&gt;&gt;
	@@color:rgb(0,240,0);envied@@
&lt;&lt;elseif $rep &gt; 1500&gt;&gt;
	@@color:rgb(0,245,0);resented@@
&lt;&lt;elseif $rep &gt; 750&gt;&gt;
	@@color:rgb(0,250,0);disliked@@
&lt;&lt;else&gt;&gt;
	@@color:rgb(0,255,0);unknown@@
&lt;&lt;/if&gt;&gt;
($rep)
&lt;/span&gt;
&lt;&lt;if (_Pass == &quot;Main&quot;)&gt;&gt;
	&lt;&lt;if ($cheatMode) &amp;&amp; ($cheatModeM)&gt;&gt;
	&lt;&lt;set _TRep = $rep&gt;&gt;
	&lt;&lt;textbox &quot;$rep&quot; $rep&gt;&gt;
	&lt;&lt;link &quot;Apply&quot;&gt;&gt;
	&lt;&lt;set $rep = Math.clamp(Math.trunc(Number($rep) || _TRep), 0, 20000), $cheater = 1&gt;&gt;
	&lt;&lt;replace &quot;#rep&quot;&gt;&gt;
	&lt;&lt;if $rep &gt; 19000&gt;&gt;
		@@color:rgb(0,145,0);worshipped@@
	&lt;&lt;elseif $rep &gt; 18000&gt;&gt;
		@@color:rgb(0,150,0);great@@
	&lt;&lt;elseif $rep &gt; 17000&gt;&gt;
		@@color:rgb(0,155,0);exalted@@
	&lt;&lt;elseif $rep &gt; 16000&gt;&gt;
		@@color:rgb(0,160,0);illustrious@@
	&lt;&lt;elseif $rep &gt; 15000&gt;&gt;
		@@color:rgb(0,165,0);prestigious@@
	&lt;&lt;elseif $rep &gt; 14000&gt;&gt;
		@@color:rgb(0,170,0);renowned@@
	&lt;&lt;elseif $rep &gt; 13000&gt;&gt;
		@@color:rgb(0,175,0);famed@@
	&lt;&lt;elseif $rep &gt; 12000&gt;&gt;
		@@color:rgb(0,180,0);celebrated@@
	&lt;&lt;elseif $rep &gt; 11000&gt;&gt;
		@@color:rgb(0,185,0);honored@@
	&lt;&lt;elseif $rep &gt; 10000&gt;&gt;
		@@color:rgb(0,190,0);acclaimed@@
	&lt;&lt;elseif $rep &gt; 9000&gt;&gt;
		@@color:rgb(0,195,0);eminent@@
	&lt;&lt;elseif $rep &gt; 8250&gt;&gt;
		@@color:rgb(0,200,0);prominent@@
	&lt;&lt;elseif $rep &gt; 7000&gt;&gt;
		@@color:rgb(0,205,0);distinguished@@
	&lt;&lt;elseif $rep &gt; 6750&gt;&gt;
		@@color:rgb(0,210,0);admired@@
	&lt;&lt;elseif $rep &gt; 6000&gt;&gt;
		@@color:rgb(0,215,0);esteemed@@
	&lt;&lt;elseif $rep &gt; 5250&gt;&gt;
		@@color:rgb(0,220,0);respected@@
	&lt;&lt;elseif $rep &gt; 4500&gt;&gt;
		@@color:rgb(0,225,0);known@@
	&lt;&lt;elseif $rep &gt; 3750&gt;&gt;
		@@color:rgb(0,230,0);recognized@@
	&lt;&lt;elseif $rep &gt; 3000&gt;&gt;
		@@color:rgb(0,235,0);rumored@@
	&lt;&lt;elseif $rep &gt; 2250&gt;&gt;
		@@color:rgb(0,240,0);envied@@
	&lt;&lt;elseif $rep &gt; 1500&gt;&gt;
		@@color:rgb(0,245,0);resented@@
	&lt;&lt;elseif $rep &gt; 750&gt;&gt;
		@@color:rgb(0,250,0);disliked@@
	&lt;&lt;else&gt;&gt;
		@@color:rgb(0,255,0);unknown@@
	&lt;&lt;/if&gt;&gt;
	($rep)
	&lt;&lt;/replace&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;elseif _Pass == &quot;Options&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;nobr&gt;&gt;
&lt;&lt;if (_Pass == &quot;Encyclopedia&quot;) || ($showEncyclopedia == 0) || ($encyclopedia == &quot; &quot;)&gt;&gt;
&lt;&lt;else&gt;&gt;
	//FCE:// [[$encyclopedia|Encyclopedia][$nextButton = &quot;Back&quot;, $nextLink = _Pass]]
&lt;&lt;/if&gt;&gt;
	&lt;br&gt;&lt;br&gt;
&lt;&lt;if ($debugMode == 1)&gt;&gt;
	Debugging
	&lt;br&gt;
	&lt;&lt;link &quot;Display Variables&quot;&gt;&gt;&lt;&lt;checkvars&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;br&gt;
	&lt;&lt;link &quot;Bug Report&quot;&gt;&gt;&lt;&lt;bugreport&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;
</tw-passagedata><tw-passagedata pid="9" name="Encyclopedia" tags="" position="666,548.5" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="10" name="Fluffy Intro" tags="nobr" position="902,910" size="100,100">&lt;br&gt;
&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;
&lt;br&gt;Game Design Document: https://docs.google.com/document/d/1LIVm4eylJ_1YTUdhYx_K6K-_H0sQ3r1WelZ_44poASs/edit?usp=sharing
&lt;br&gt;
&lt;br&gt;
&lt;&lt;if $showStartingExplanation == 1&gt;&gt;
	&lt;br&gt;@@.orange;TODO: add some starting shop options here.@@
	&lt;br&gt;
	&lt;br&gt;You will need to get at least a pair of fluffies to start breeding with.  You could go hunting for some ferals, risking whatever health issues they may have, or you can pick up some from the local //Fluffy Mart// to pick some up for a more reliable option.
&lt;&lt;/if&gt;&gt;
&lt;br&gt;&lt;span id=&quot;cash-line&quot;&gt;You have $cash to spend, but will need to save some for weekly expenses.&lt;/span&gt;
&lt;br&gt;
&lt;&lt;if $ourStore.fluffies.length == false&gt;&gt;
&lt;&lt;elseif $ourStore.fluffies.length == 1&gt;&gt;
	You have one fluffy already.
&lt;&lt;elseif $ourStore.fluffies.length &gt; 1&gt;&gt;
	You have $ourStore.fluffies.length fluffies already.
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;br&gt;//[[Lets hunt for some ferals!|Fluffy Intro][$outShopping = false]]// @@.orange;WIP: Not enabled at this time.@@
&lt;br&gt;
&lt;br&gt;//[[Lets go Shopping|Fluffy Intro][$outShopping = true]]//

&lt;&lt;BaseFluffy &quot;MALE&quot;&gt;&gt;
&lt;&lt;set _Granddad = clone($activeFluffy)&gt;&gt;
&lt;&lt;BaseFluffy &quot;FEMALE&quot;&gt;&gt;
&lt;&lt;set _Grandmom = clone($activeFluffy)&gt;&gt;

&lt;&lt;if $outShopping&gt;&gt;
	&lt;hr&gt;
	&lt;br&gt;You find this fluffy:
	&lt;hr&gt;
	&lt;&lt;set $testChild = _Grandmom.genes.breedWithGenome(_Granddad.genes)&gt;&gt;
	&lt;&lt;newFromGene $testChild&gt;&gt;	
	&lt;&lt;set _shopFluffy = clone($activeFluffy)&gt;&gt;
&lt;br&gt;&lt;&lt;print _shopFluffy.genes&gt;&gt;
	&lt;&lt;FluffyDesc&gt;&gt;
	&lt;br&gt;&lt;&lt;They&gt;&gt; would cost 
	&lt;&lt;switch $activeFluffy.breed&gt;&gt;
	&lt;&lt;case &quot;earthy&quot; &quot;earthy*&quot; &quot;earthy**&quot;&gt;&gt;
		&lt;&lt;set _price = $earthPrice.mart&gt;&gt;
		$earthPrice.mart.
	&lt;&lt;case &quot;unicorn&quot; &quot;unicorn*&quot; &quot;unicorn**&quot;&gt;&gt;
		&lt;&lt;set _price = $unicornPrice.mart&gt;&gt;
		$unicornPrice.mart.
	&lt;&lt;case &quot;pegasus&quot; &quot;pegasus*&quot; &quot;pegasus**&quot;&gt;&gt;
		&lt;&lt;set _price = $pegasusPrice.mart&gt;&gt;
		$pegasusPrice.mart.
	&lt;&lt;case &quot;alicorn&quot; &quot;alicorn*&quot; &quot;alicorn**&quot;&gt;&gt;
		&lt;&lt;set _price = $alicornPrice.mart&gt;&gt;
		$alicornPrice.deluxe.
	&lt;&lt;/switch&gt;&gt;
	&lt;hr&gt;[[Keep Looking|Fluffy Intro][$customDad = &quot;&quot;, $customMom = &quot;&quot;, $showStartingExplanation = 0]]  | 
	&lt;&lt;if $cash &gt;= _price&gt;&gt;
	 [[Add to the cart|Fluffy Intro][$cash-= _price, $customDad = &quot;&quot;, $customMom = &quot;&quot;, $showStartingExplanation = 0, _shopFluffy.ID = $ourStore.fluffies.length, $ourStore.fluffies.push(_shopFluffy)]]  | 
	&lt;&lt;else&gt;&gt;//You lack the necessary funds to buy this fluffy.// | 
	&lt;&lt;/if&gt;&gt;
	 [[End Shopping|Food Intro]]
	&lt;br&gt;
	&lt;br&gt;
	&lt;br&gt;
	&lt;hr&gt;
	&lt;br&gt;//[[Click to re-roll all genes.|Fluffy Intro][$customDad = &quot;&quot;, $customMom = &quot;&quot;]]//
	&lt;br&gt;
	&lt;br&gt;Generates a random fluffy family..
	&lt;br&gt;Code wise, it starts with 2 genetically &#39;average&#39; grand-parents, who are used to generate 2 random parents.  Those are then used to create several foals.
	&lt;br&gt;The specific genes will not be visible latter, but are printed now to ensure the details match up.
	&lt;br&gt;Genetic information and physical features for the generated family are shown below, largely for testing the generator and display.
	&lt;br&gt;
	&lt;br&gt;** or * after the breed marks that it was changed due to the alicorn rarity selection.
	&lt;br&gt;

	&lt;&lt;set $testChild = _Grandmom.genes.breedWithGenome(_Granddad.genes)&gt;&gt;
	&lt;&lt;newFromGene $testChild&gt;&gt;
	&lt;&lt;run $activeFluffy.genes.setGender(&quot;male&quot;)&gt;&gt;
	&lt;&lt;set $activeFluffy.gender = &quot;male&quot;&gt;&gt;
	
	&lt;&lt;if $customDad == &quot;&quot;&gt;&gt;
		&lt;&lt;set $dad = clone($activeFluffy)&gt;&gt;
		&lt;&lt;set $customDad = $dad.genes.toString()&gt;&gt;
		&lt;br&gt;Father Genome: &lt;&lt;textbox &quot;$customDad&quot; $customDad &quot;Fluffy Intro&quot;&gt;&gt; Press Enter to set a custom Genome - @@.red;Warning: no validation for custom genes yet!@@
	&lt;&lt;else&gt;&gt;
		&lt;br&gt;Father Genome: &lt;&lt;textbox &quot;$customDad&quot; $customDad &quot;Fluffy Intro&quot;&gt;&gt; Press Enter to set a custom Genome - @@.red;Warning: no validation for custom genes yet!@@
		&lt;&lt;set $test = Genome.fromString($customDad)&gt;&gt;
		&lt;&lt;newFromGene $test&gt;&gt;
		&lt;&lt;run $activeFluffy.genes.setGender(&quot;male&quot;)&gt;&gt;
		&lt;&lt;set $activeFluffy.gender = &quot;male&quot;&gt;&gt;
		&lt;&lt;set $dad = clone($activeFluffy)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;br&gt;Father genome is: &lt;&lt;print $dad.genes&gt;&gt;
	&lt;&lt;Focus $dad&gt;&gt;
	&lt;&lt;FluffyDesc&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;set $testChild = _Grandmom.genes.breedWithGenome(_Granddad.genes)&gt;&gt;
	&lt;&lt;newFromGene $testChild&gt;&gt;
	&lt;&lt;run $activeFluffy.genes.setGender(&quot;female&quot;)&gt;&gt;
	&lt;&lt;set $activeFluffy.gender = &quot;female&quot;&gt;&gt;
	
	&lt;&lt;if $customMom == &quot;&quot;&gt;&gt;
		&lt;&lt;set $mom = clone($activeFluffy)&gt;&gt;
		&lt;&lt;set $customMom = $mom.genes.toString()&gt;&gt;
		&lt;br&gt;Mother Genome: &lt;&lt;textbox &quot;$customMom&quot; $customMom &quot;Fluffy Intro&quot;&gt;&gt; Press Enter to set a custom Genome - @@.red;Warning: no validation for custom genes yet!@@
	&lt;&lt;else&gt;&gt;
		&lt;br&gt;Mother Genome: &lt;&lt;textbox &quot;$customMom&quot; $customMom &quot;Fluffy Intro&quot;&gt;&gt; Press Enter to set a custom Genome - @@.red;Warning: no validation for custom genes yet!@@
		&lt;&lt;set $test = Genome.fromString($customMom)&gt;&gt;
		&lt;&lt;newFromGene $test&gt;&gt;
		&lt;&lt;set $mom = clone($activeFluffy)&gt;&gt;
		&lt;&lt;run $mom.genes.setGender(&quot;female&quot;)&gt;&gt;
		&lt;&lt;set $mom.gender = &quot;female&quot;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;run $mom.genes.setGender(&quot;female&quot;)&gt;&gt;
	&lt;&lt;set $mom.gender = &quot;female&quot;&gt;&gt;
	&lt;br&gt;Mother genome is: &lt;&lt;print $mom.genes&gt;&gt;
	&lt;&lt;Focus $mom&gt;&gt;
	&lt;&lt;FluffyDesc&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;breedFluffies $mom $dad&gt;&gt;
	&lt;br&gt;Foal1 genome is: &lt;&lt;print $activeFluffy.genes&gt;&gt;
	&lt;&lt;FluffyDesc&gt;&gt;
	&lt;br&gt;
	&lt;hr&gt;
	&lt;&lt;breedFluffies $mom $dad&gt;&gt;
	&lt;br&gt;Foal2 genome is: &lt;&lt;print $activeFluffy.genes&gt;&gt;
	&lt;&lt;FluffyDesc&gt;&gt;
	&lt;br&gt;
	&lt;hr&gt;
	&lt;&lt;breedFluffies $mom $dad&gt;&gt;
	&lt;br&gt;Foal3 genome is: &lt;&lt;print $activeFluffy.genes&gt;&gt;
	&lt;&lt;FluffyDesc&gt;&gt;
	&lt;br&gt;
&lt;&lt;/if&gt;&gt;

&lt;br&gt;//[[Back to Options|Intro Summary][$economy = 1, $alicornRarity = 1, $alicornMonster = 1, $pooBaby = 1, $smartySyndrom = 1]]//</tw-passagedata><tw-passagedata pid="11" name="Food Intro" tags="nobr" position="902,1060" size="100,100">&lt;br&gt;
&lt;br&gt;&lt;span id=&quot;cash-line&quot;&gt;You have $cash to spend, but will need to save some for weekly expenses.&lt;/span&gt;
&lt;br&gt;
&lt;&lt;if $ourStore.fluffies.length == false&gt;&gt;
&lt;&lt;elseif $ourStore.fluffies.length == 1&gt;&gt;
	You have one fluffy.
&lt;&lt;elseif $ourStore.fluffies.length &gt; 1&gt;&gt;
	You have $ourStore.fluffies.length fluffies.
&lt;&lt;/if&gt;&gt;
&lt;br&gt;
&lt;&lt;click &quot;Kibble&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#section1&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt; &lt;span id=&quot;kibble-amount&quot;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;/span&gt;
&lt;div id=&quot;section1&quot; class=&quot;hidden&quot;&gt;
Trash Kibble ($foodPrice.kibble.trash each): &lt;span id=&quot;buy-trash-kibble&quot;&gt;&lt;&lt;print $food.kibble.trash&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.trash * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.trash * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.trash++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.trash * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.trash * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.trash += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.trash * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.trash * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.trash += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Cheap Kibble ($foodPrice.kibble.cheap each): &lt;span id=&quot;buy-cheap-kibble&quot;&gt;&lt;&lt;print $food.kibble.cheap&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.cheap * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.cheap * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.cheap++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.cheap * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.cheap * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.cheap += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.cheap * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.cheap * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.cheap += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Basic Kibble ($foodPrice.kibble.basic each): &lt;span id=&quot;buy-basic-kibble&quot;&gt;&lt;&lt;print $food.kibble.basic&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.basic * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.basic * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.basic++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.basic * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.basic * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.basic += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.basic * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.basic * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.basic += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Good Kibble ($foodPrice.kibble.good each): &lt;span id=&quot;buy-good-kibble&quot;&gt;&lt;&lt;print $food.kibble.good&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.good * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.good * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.good++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.good * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.good * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.good += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.good * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.good * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.good += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Quality Kibble ($foodPrice.kibble.quality each): &lt;span id=&quot;buy-quality-kibble&quot;&gt;&lt;&lt;print $food.kibble.quality&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.quality * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.quality * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.quality++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.quality * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.quality * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.quality += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.kibble.quality * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.kibble.quality * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.kibble.quality += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-kibble&quot;&gt;&gt;&lt;&lt;print $food.kibble.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#kibble-amount&quot;&gt;&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;/div&gt;
&lt;br&gt;
&lt;br&gt;
&lt;&lt;click &quot;Formula&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#section2&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt; &lt;span id=&quot;formula-amount&quot;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;/span&gt;
&lt;div id=&quot;section2&quot; class=&quot;hidden&quot;&gt;
Trash formula ($foodPrice.formula.trash each): &lt;span id=&quot;buy-trash-formula&quot;&gt;&lt;&lt;print $food.formula.trash&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.trash * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.trash * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.trash++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.trash * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.trash * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.trash += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.trash * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.trash * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.trash += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Cheap formula ($foodPrice.formula.cheap each): &lt;span id=&quot;buy-cheap-formula&quot;&gt;&lt;&lt;print $food.formula.cheap&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.cheap * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.cheap * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.cheap++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.cheap * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.cheap * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.cheap += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.cheap * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.cheap * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.cheap += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Basic formula ($foodPrice.formula.basic each): &lt;span id=&quot;buy-basic-formula&quot;&gt;&lt;&lt;print $food.formula.basic&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.basic * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.basic * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.basic++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.basic * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.basic * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.basic += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.basic * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.basic * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.basic += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Good formula ($foodPrice.formula.good each): &lt;span id=&quot;buy-good-formula&quot;&gt;&lt;&lt;print $food.formula.good&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.good * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.good * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.good++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.good * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.good * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.good += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.good * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.good * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.good += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Quality formula ($foodPrice.formula.quality each): &lt;span id=&quot;buy-quality-formula&quot;&gt;&lt;&lt;print $food.formula.quality&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.quality * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.quality * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.quality++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.quality * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.quality * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.quality += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.formula.quality * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.formula.quality * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.formula.quality += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-formula&quot;&gt;&gt;&lt;&lt;print $food.formula.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#formula-amount&quot;&gt;&gt;&lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;/div&gt;
&lt;br&gt;
&lt;br&gt;
&lt;&lt;click &quot;Greens&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#section3&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt; &lt;span id=&quot;greens-amount&quot;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;/span&gt;
&lt;div id=&quot;section3&quot; class=&quot;hidden&quot;&gt;
Trash greens ($foodPrice.greens.trash each): &lt;span id=&quot;buy-trash-greens&quot;&gt;&lt;&lt;print $food.greens.trash&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.trash * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.trash * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.trash++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.trash * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.trash * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.trash += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.trash * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.trash * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.trash += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Cheap greens ($foodPrice.greens.cheap each): &lt;span id=&quot;buy-cheap-greens&quot;&gt;&lt;&lt;print $food.greens.cheap&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.cheap * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.cheap * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.cheap++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.cheap * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.cheap * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.cheap += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.cheap * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.cheap * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.cheap += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Basic greens ($foodPrice.greens.basic each): &lt;span id=&quot;buy-basic-greens&quot;&gt;&lt;&lt;print $food.greens.basic&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.basic * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.basic * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.basic++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.basic * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.basic * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.basic += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.basic * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.basic * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.basic += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Good greens ($foodPrice.greens.good each): &lt;span id=&quot;buy-good-greens&quot;&gt;&lt;&lt;print $food.greens.good&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.good * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.good * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.good++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.good * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.good * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.good += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.good * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.good * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.good += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Quality greens ($foodPrice.greens.quality each): &lt;span id=&quot;buy-quality-greens&quot;&gt;&lt;&lt;print $food.greens.quality&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.quality * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.quality * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.quality++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.quality * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.quality * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.quality += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.greens.quality * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.greens.quality * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.greens.quality += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-greens&quot;&gt;&gt;&lt;&lt;print $food.greens.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#greens-amount&quot;&gt;&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;/div&gt;
&lt;br&gt;
&lt;br&gt;
&lt;&lt;click &quot;Sketti&quot;&gt;&gt;&lt;&lt;toggleclass &quot;#section4&quot; &quot;hidden&quot;&gt;&gt;&lt;&lt;/click&gt;&gt; &lt;span id=&quot;sketti-amount&quot;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;/span&gt;
&lt;div id=&quot;section4&quot; class=&quot;hidden&quot;&gt;
Trash sketti ($foodPrice.sketti.trash each): &lt;span id=&quot;buy-trash-sketti&quot;&gt;&lt;&lt;print $food.sketti.trash&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.trash * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.trash * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.trash++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.trash * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.trash * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.trash += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.trash * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.trash * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.trash += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-trash-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.trash&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Cheap sketti ($foodPrice.sketti.cheap each): &lt;span id=&quot;buy-cheap-sketti&quot;&gt;&lt;&lt;print $food.sketti.cheap&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.cheap * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.cheap * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.cheap++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.cheap * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.cheap * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.cheap += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.cheap * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.cheap * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.cheap += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-cheap-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.cheap&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Basic sketti ($foodPrice.sketti.basic each): &lt;span id=&quot;buy-basic-sketti&quot;&gt;&lt;&lt;print $food.sketti.basic&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.basic * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.basic * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.basic++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.basic * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.basic * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.basic += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.basic * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.basic * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.basic += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-basic-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.basic&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Good sketti ($foodPrice.sketti.good each): &lt;span id=&quot;buy-good-sketti&quot;&gt;&lt;&lt;print $food.sketti.good&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.good * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.good * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.good++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.good * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.good * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.good += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.good * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.good * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.good += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-good-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.good&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;br&gt;Quality sketti ($foodPrice.sketti.quality each): &lt;span id=&quot;buy-quality-sketti&quot;&gt;&lt;&lt;print $food.sketti.quality&gt;&gt;&lt;/span&gt;
( &lt;&lt;link &quot;[+1]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.quality * 1)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.quality * 1)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.quality++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+10]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.quality * 10)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.quality * 10)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.quality += 10&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; 
| &lt;&lt;link &quot;[+100]&quot; &gt;&gt;&lt;&lt;if $cash &gt; ($foodPrice.sketti.quality * 100)&gt;&gt;&lt;&lt;set $cash -= ($foodPrice.sketti.quality * 100)&gt;&gt;&lt;&lt;set $cash = Number($cash).toFixed(2)&gt;&gt;&lt;&lt;set $food.sketti.quality += 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;replace &quot;#buy-quality-sketti&quot;&gt;&gt;&lt;&lt;print $food.sketti.quality&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#cash-line&quot;&gt;&gt;You have $cash left.&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#sketti-amount&quot;&gt;&gt;&lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; weeks worth.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )
&lt;/div&gt;
&lt;br&gt;
[[End Shopping|Week Start]]</tw-passagedata><tw-passagedata pid="12" name="End Week" tags="nobr" position="1182,380" size="100,100">&lt;&lt;set $nextButton to &quot;CONTINUE.&quot;, $nextLink to &quot;Week Start&quot;&gt;&gt;

&lt;&lt;for _ef to 0; _ef lt $ourStore.fluffies.length; _ef++&gt;&gt;
	&lt;&lt;if $ourStore.fluffies[_ef].specialFriend != -1 &amp;&amp; $ourStore.fluffies[_ef].gender == &quot;female&quot;&gt;&gt;
		&lt;&lt;set $mom = $ourStore.fluffies[_ef]&gt;&gt;
		&lt;&lt;set $dad = $ourStore.fluffies[$ourStore.fluffies[_ef].specialFriend]&gt;&gt;
		
		&lt;br&gt;$mom.name and $dad.name have special hugs.
		&lt;br&gt;enf enf enf
		
		&lt;&lt;set _litter = Math.clamp(Math.round(($mom.fertility + $dad.fertility) / 2) + random(-1, 3), 1, 8)&gt;&gt;
		&lt;br&gt;_litter foals


		&lt;&lt;for _fo = 0; _fo &lt; _litter; _fo++&gt;&gt;
			&lt;&lt;breedFluffies $mom $dad&gt;&gt;
			&lt;br&gt;Foal#&lt;&lt;print _f+1&gt;&gt; &lt;&lt;FluffyDesc&gt;&gt;
			&lt;hr&gt;
			&lt;&lt;set $activeFluffy.ID = $ourStore.fluffies.length&gt;&gt;
			&lt;&lt;run $ourStore.fluffies.push($activeFluffy)&gt;&gt;

		&lt;&lt;/for&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;



&lt;br&gt;@@.orange;THE END.@@
&lt;br&gt;
&lt;br&gt;.. of what has been coded so far.
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;@@.yellow;Developers TODO list.@@
&lt;br&gt;
&lt;br&gt;
 &lt;ol&gt;
 &lt;li&gt;Get breeding running to test genes/illness/inbreeding.&lt;/li&gt;
 &lt;li&gt;Check for genes linked to illness/still births/inbreed.&lt;/li&gt;
 &lt;li&gt;Clean up the buying of starting fluffies.&lt;/li&gt;
 &lt;li&gt;Enable feral hunting.&lt;/li&gt;
 &lt;li&gt;Other inherited traits ala CK2/CK3 https://ck3.paradoxwikis.com/Traits&lt;/li&gt;
 &lt;li&gt;Non genetic traits fluffies can aquire.ala CK2/CK3 https://ck3.paradoxwikis.com/Traits&lt;/li&gt;
 &lt;li&gt;Add validation for inserting custom genes for a fluffy generation&lt;/li&gt;
 &lt;li&gt;Include a debug menu/option for the above&lt;/li&gt;
 &lt;li&gt;Some PC customization (at least what the fluffies will call you).&lt;/li&gt;
 &lt;li&gt;Player stats: Reputation, Training XP, Abuse XP, Hugbox XP, Abuse Reputation, Hugbox Reputation, stress&lt;/li&gt;
 &lt;li&gt;Outline code for weekly events.&lt;/li&gt;
 &lt;li&gt;Make this page do ... things.&lt;/li&gt;
 &lt;/ol&gt;
 &lt;br&gt;

&lt;br&gt;//[[Back to Week Start|Week Start]]//
&lt;br&gt;
&lt;br&gt;//[[Back to Options|Intro Summary][$economy = 1, $alicornRarity = 1, $alicornMonster = 1, $pooBaby = 1, $smartySyndrom = 1]]//
</tw-passagedata><tw-passagedata pid="13" name="Costs Budget" tags="" position="320,555.5" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="14" name="init" tags="nobr" position="900,201" size="100,100">/*
Fluffy Breeder
a text-based fluffy management game
Current code copied from Free Cities (Copyright (C) 2017  freecitiesdev)

This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
*/

&lt;&lt;unset $releaseID&gt;&gt;
&lt;&lt;set $ver = &quot;00.00.01&quot;, $releaseID = COMMIT&gt;&gt;
&lt;&lt;if ndef $releaseID&gt;&gt;&lt;&lt;set $releaseID = 1&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;set $week = 1&gt;&gt;
&lt;&lt;set $month = &quot;January&quot;&gt;&gt;
&lt;&lt;set $day = random(9, 21)&gt;&gt;
&lt;&lt;set $year = random(2030, 2056)&gt;&gt;

&lt;&lt;set $cash = 1000&gt;&gt;
&lt;&lt;set $economy = 1&gt;&gt;
&lt;&lt;set $alicornRarity = 1&gt;&gt; 
&lt;&lt;set $alicornMonster = 1&gt;&gt; 
&lt;&lt;set $pooBaby = 1&gt;&gt;
&lt;&lt;set $smartySyndrom = 1&gt;&gt;

&lt;&lt;set $showStartingExplanation = 1&gt;&gt;
&lt;&lt;set $customDad = &quot;&quot;&gt;&gt;
&lt;&lt;set $customMom = &quot;&quot;&gt;&gt;
&lt;&lt;set $outShopping = false&gt;&gt; 

&lt;&lt;set $fID = 0&gt;&gt;
&lt;&lt;set $storeMales = 0&gt;&gt;
&lt;&lt;set $storeFemales = 0&gt;&gt;
&lt;&lt;set $storeFoals = 0&gt;&gt;

&lt;&lt;set $storePoints = 111&gt;&gt;
&lt;&lt;set $ourStore = {
	name: &quot;The Store&quot;,
	space: 0,
	shelter: 0,
	display: 0,
	storage: 0,
	fluffies: [],
	stallions: 0,
	mares: 0,
	foals: 0
}
&gt;&gt;
&lt;&lt;set $food = {
	kibble: {
		trash: 0,
		cheap: 0,
		basic: 0,
		good: 0,
		quality: 0
	},
	formula: {
		trash: 0,
		cheap: 0,
		basic: 0,
		good: 0,
		quality: 0
	},
	greens: {
		trash: 0,
		cheap: 0,
		basic: 0,
		good: 0,
		quality: 0
	},
	sketti: {
		trash: 0,
		cheap: 0,
		basic: 0,
		good: 0,
		quality: 0
	}
}
&gt;&gt;
&lt;&lt;set $foodPrice = {
	kibble: {
		trash: .05,
		cheap: .5,
		basic: 2,
		good: 7,
		quality: 14
	},
	formula: {
		trash: 0.2,
		cheap: 2,
		basic: 6,
		good: 10,
		quality: 21
	},
	greens: {
		trash: 0.01,
		cheap: .1,
		basic: 1,
		good: 5,
		quality: 10
	},
	sketti: {
		trash: 2,
		cheap: 5,
		basic: 10,
		good: 15,
		quality: 20
	}
}
&gt;&gt;

&lt;&lt;set $breedMare = -1&gt;&gt;
&lt;&lt;set $breedStal = -1&gt;&gt;

/* This needs to be broken down into individual files that can be added to StoryInit instead. */

&lt;&lt;if ndef $saveImported&gt;&gt;
	&lt;&lt;set $saveImported = 0&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $saveImported == 0&gt;&gt;

&lt;&lt;set $cheater = 0&gt;&gt;
&lt;&lt;set $cash = 1000&gt;&gt;
&lt;&lt;set $normalizedEvents = 0&gt;&gt;
&lt;&lt;set $autosave = 1&gt;&gt;
&lt;&lt;set $seeAge = 1&gt;&gt;
&lt;&lt;set $seeImages = 0&gt;&gt;
&lt;&lt;set $imageChoice = 0&gt;&gt;
&lt;&lt;set $seeVectorArtHighlights = 1&gt;&gt;

&lt;&lt;include &quot;Init Rules&quot;&gt;&gt;

&lt;&lt;set $lastWeeksFinances = {
incomeSales: 0,
expensesRents: 0,
profitsTotal: 0
}&gt;&gt;

&lt;&lt;set $niceWeather = [
	{name: &quot;Sunny&quot;, severity: 1},
	{name: &quot;Cloudy&quot;, severity: 1},
	{name: &quot;Partly Cloudy&quot;, severity: 1},
	{name: &quot;Overcast&quot;, severity: 1},
	{name: &quot;Light Wind&quot;, severity: 1},
	{name: &quot;Clear and Calm&quot;, severity: 1},
	{name: &quot;Light Rain&quot;, severity: 1},
	{name: &quot;Heavy Rain&quot;, severity: 1},
	{name: &quot;Smoke warning&quot;, severity: 1},
]&gt;&gt;

&lt;&lt;set $lightWeather = [
	{name: &quot;High Winds&quot;, severity: 2},
	{name: &quot;Acid Rain&quot;, severity: 2},
	{name: &quot;T-Storm Warning&quot;, severity: 2},
	{name: &quot;Flood Warning&quot;, severity: 2},
	{name: &quot;Tornado Warning&quot;, severity: 2},
	{name: &quot;Light Sandstorm&quot;, severity: 2},
	{name: &quot;High Heat&quot;, severity: 2},
	{name: &quot;Smoky&quot;, severity: 2},
]&gt;&gt;

&lt;&lt;set $heavyWeather = [
	{name: &quot;Extreme Winds&quot;, severity: 3},
	{name: &quot;Heavy Acid Rain&quot;, severity: 3},
	{name: &quot;Extreme T-storm&quot;, severity: 3},
	{name: &quot;Flooding&quot;, severity: 3},
	{name: &quot;Tornadoes&quot;, severity: 3},
	{name: &quot;Sandstorm&quot;, severity: 3},
	{name: &quot;Extreme Heat&quot;, severity: 3},
	{name: &quot;Dense Smoke&quot;, severity: 3},
]&gt;&gt;

&lt;&lt;set $extremeWeather = [
	{name: &quot;Solar Flare&quot;, severity: 4},
	{name: &quot;Ion Storm&quot;, severity: 4},
	{name: &quot;Cataclysmic Rains&quot;, severity: 4},
	{name: &quot;Cat 6 Hurricane&quot;, severity: 4},
	{name: &quot;Abrasive Sandstorm&quot;, severity: 4},
	{name: &quot;Radiological Warning&quot;, severity: 4},
]&gt;&gt;

&lt;&lt;set $weatherToday = $niceWeather.random()&gt;&gt;

&lt;&lt;set $returnTo = &quot;Week Start&quot;&gt;&gt;
&lt;&lt;set $nextButton = &quot;END WEEK&quot;&gt;&gt;
&lt;&lt;set $nextLink = &quot;EW Fluffies&quot;&gt;&gt;


&lt;&lt;set $cheatMode = 0&gt;&gt;

/* HACKY EVENT WORKAROUNDS */
&lt;&lt;set $eventID = -1&gt;&gt;

&lt;&lt;goto &quot;Disclaimer&quot;&gt;&gt;
</tw-passagedata><tw-passagedata pid="15" name="misc widgets" tags="nobr widget" position="198,206" size="100,100">/* TODO: Modularize. */

/%
 Call as &lt;&lt;UpdateNextButton&gt;&gt;
 Allows for dynamic updating of the next button in the storyCaption (left side-bar) for events that disable the button until user makes a selection
%/
&lt;&lt;widget &quot;UpdateNextButton&quot;&gt;&gt;
	&lt;&lt;replace &quot;#nextButton&quot;&gt;&gt;
		&lt;strong&gt;&lt;&lt;link &quot;$nextButton&quot;&gt;&gt; /* must use link so spacebar shortcut will work */
			&lt;&lt;if $nextButton != &quot; &quot;&gt;&gt; /* but no effect if nextButton is set to a blank space */
				&lt;&lt;set $ui = &quot;main&quot;&gt;&gt;
				&lt;&lt;goto $nextLink&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/link&gt;&gt;&lt;/strong&gt;
		&lt;&lt;if $nextButton != &quot; &quot;&gt;&gt;@@.cyan;[Space]@@&lt;&lt;/if&gt;&gt;
	&lt;&lt;/replace&gt;&gt;
&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget &quot;CreateSimpleTabs&quot;&gt;&gt;

	&lt;head&gt;
	&lt;style&gt;

	div.tab {
		overflow: hidden;
		border: 1px solid #ccc;
		background-color: transparent;
	}

	div.tab button {
		background-color: inherit;
		float: left;
		border: none;
		outline: none;
		cursor: pointer;
		padding: 14px 16px;
		transition: 0.3s;
		font-size: 19px;
	}

	div.tab button:hover {
		background-color: #444;
	}

	div.tab button.active {
		background-color: #777;
	}

	.tabcontent {
		display: none;
		padding: 6px 12px;
		-webkit-animation: fadeEffect 1s;
		animation: fadeEffect 1s;
	}

	@-webkit-keyframes fadeEffect {
		from {opacity: 0;}
		to {opacity: 1;}
	}

	@keyframes fadeEffect {
		from {opacity: 0;}
		to {opacity: 1;}
	}
	&lt;/style&gt;
	&lt;/head&gt;

&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;SidebarDate&quot;&gt;&gt;
	&lt;&lt;if $cheatMode&gt;&gt;_Pass&lt;br&gt;&lt;&lt;/if&gt;&gt;
	&lt;span id=&quot;week&quot;&gt;&#39;&#39;Week $week&#39;&#39;&lt;/span&gt;
	&lt;br&gt;Week of $month $day, $year
	&lt;&lt;if (_Pass == &quot;Main&quot;) &amp;&amp; ($cheatMode)&amp;&amp; ($cheatModeM)&gt;&gt;
		&lt;&lt;set _TWeek = $week&gt;&gt;
		&lt;&lt;textbox &quot;$week&quot; $week&gt;&gt;
		&lt;&lt;link &quot;Apply&quot;&gt;&gt;
		&lt;&lt;set $week = Math.trunc(Number($week) || _TWeek)&gt;&gt;
		&lt;&lt;if $week &lt; 1&gt;&gt;&lt;&lt;set $week = 1&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;replace &quot;#week&quot;&gt;&gt;&#39;&#39;Week $week&#39;&#39;&lt;&lt;/replace&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;br&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;SidebarWeather&quot;&gt;&gt;
	&lt;&lt;if $weatherToday.severity == 1&gt;&gt;
		//@@.cyan;$weatherToday.name@@//
	&lt;&lt;elseif $weatherToday.severity == 2&gt;&gt;
		//@@.yellow;$weatherToday.name@@//
	&lt;&lt;elseif $weatherToday.severity == 3&gt;&gt;
		//@@.orange;$weatherToday.name@@//
	&lt;&lt;else&gt;&gt;
		//@@.red;$weatherToday.name@@//
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget &quot;SidebarCash&quot;&gt;&gt;
	&lt;&lt;set $cash = Math.trunc($cash)&gt;&gt;
	&lt;span id=&quot;cash&quot;&gt;
	&lt;&lt;if $cash &gt; 0&gt;&gt;
		@@.yellowgreen;Cash@@
	&lt;&lt;else&gt;&gt;
		__@@.red;Cash@@__
	&lt;&lt;/if&gt;&gt;
	| &#39;&#39;&#39;&#39;$cash
	&lt;/span&gt;
	&lt;br&gt;
	&lt;&lt;if _Pass == &quot;Main&quot;&gt;&gt;
		&lt;&lt;set _TCash2 = ($cash-$cashLastWeek)&gt;&gt;
		&lt;span id=&quot;oldcash&quot;&gt;
		&lt;&lt;if _TCash2 &lt; 0&gt;&gt;
			(@@.red;_TCash2@@
		&lt;&lt;else&gt;&gt;
			(@@.yellowgreen;+_TCash2@@
		&lt;&lt;/if&gt;&gt;
		&lt;/span&gt;
		since last week)
		&lt;&lt;if ($cheatMode) &amp;&amp; ($cheatModeM)&gt;&gt;
			&lt;&lt;set _TCash1 = $cash&gt;&gt;
			&lt;&lt;textbox &quot;$cash&quot; $cash&gt;&gt;
			&lt;&lt;link &quot;Apply&quot;&gt;&gt;
			&lt;&lt;set $cash = Math.trunc(Number($cash) || _TCash1), $cheater = 1&gt;&gt;
			&lt;&lt;replace &quot;#cash&quot;&gt;&gt;
			&lt;&lt;if $cash &gt; 0&gt;&gt;
				@@.yellowgreen;Cash@@
			&lt;&lt;else&gt;&gt;
				__@@.red;Cash@@__
			&lt;&lt;/if&gt;&gt;
			| &#39;&#39;&#39;&#39;$cash
			&lt;&lt;/replace&gt;&gt;
			&lt;&lt;set _TCash2 = ($cash-$cashLastWeek)&gt;&gt;
			&lt;&lt;replace &quot;#oldcash&quot;&gt;&gt;
			&lt;&lt;if _TCash2 &lt; 0&gt;&gt;
				(@@.red;_TCash2@@
			&lt;&lt;else&gt;&gt;
				(@@.yellowgreen;+_TCash2@@
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;/replace&gt;&gt;
			since last week)
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;br&gt;[[Upkeep|Costs Budget]] |
	&lt;&lt;else&gt;&gt;
		&lt;br&gt;Upkeep |
	&lt;&lt;/if&gt;&gt;$costs
&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget &quot;SidebarFluffies&quot;&gt;&gt;
	&lt;&lt;set _SF = $ourStore.fluffies.length&gt;&gt;
	&lt;&lt;set $ourStore.stallions = 0, $ourStore.mares = 0,  $ourStore.foals = 0&gt;&gt; 
	
	&lt;&lt;for $i to 0; $i lt _SF; $i++&gt;&gt;
		&lt;&lt;for _i = $i + 1; _i &lt; _SF; _i++&gt;&gt;
			&lt;&lt;if $ourStore.fluffies[$i].ID == $ourStore.fluffies[_i].ID&gt;&gt;
				&lt;br&gt;&lt;br&gt;@@.red;Duplicate fluffy ID $ourStore.fluffies[$i].ID at index $i - $ourStore.fluffies[$i].name and index _i - $ourStore.fluffies[_i].name@@&lt;br&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/for&gt;&gt;
		
		&lt;&lt;if ($ourStore.fluffies[$i].ageWeeks + ($ourStore.fluffies[$i].age * 52)) &lt; $ourStore.fluffies[$i].maturity&gt;&gt;
			&lt;&lt;set $ourStore.foals++&gt;&gt;
		&lt;&lt;elseif $ourStore.fluffies[$i].gender == &quot;male&quot;&gt;&gt;
			&lt;&lt;set $ourStore.stallions++&gt;&gt;
		&lt;&lt;elseif $ourStore.fluffies[$i].gender == &quot;female&quot;&gt;&gt;
			&lt;&lt;set $ourStore.mares++&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;br&gt;&lt;br&gt;@@.red;Invalid Gender found $ourStore.fluffies[$i].ID at index $i - &quot; $ourStore.fluffies[$i].gender &quot;@@&lt;br&gt;&lt;br&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;

	&lt;br&gt;@@.pink;[[Total Fluffies|Fluffy List]]@@ | $ourStore.fluffies.length /  $ourStore.shelter
	&lt;br&gt;($ourStore.foals @@.cyan;Foals@@ $ourStore.mares @@.cyan;Mares@@ $ourStore.stallions @@.cyan;Stallions@@)
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;SidebarStore&quot;&gt;&gt;
	&lt;br&gt;@@.pink;Store@@
	&lt;br&gt;$ourStore.shelter @@.cyan;Shelter@@ | $ourStore.display @@.cyan;Display@@
	&lt;br&gt;$ourStore.space @@.cyan;Space@@ | $ourStore.storage @@.cyan;Storage@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;SidebarFood&quot;&gt;&gt;
	&lt;br&gt;@@.pink;Food@@ | &lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality) + ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality) + ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality) + ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; /  $ourStore.storage
	&lt;br&gt;&lt;&lt;print ($food.kibble.trash + $food.kibble.cheap + $food.kibble.basic + $food.kibble.good + $food.kibble.quality)&gt;&gt; @@.cyan;Kibble@@ | &lt;&lt;print ($food.formula.trash + $food.formula.cheap + $food.formula.basic + $food.formula.good + $food.formula.quality)&gt;&gt; @@.cyan;Forumla@@
	&lt;br&gt;&lt;&lt;print ($food.greens.trash + $food.greens.cheap + $food.greens.basic + $food.greens.good + $food.greens.quality)&gt;&gt; @@.cyan;Greens@@ | &lt;&lt;print ($food.sketti.trash + $food.sketti.cheap + $food.sketti.basic + $food.sketti.good + $food.sketti.quality)&gt;&gt; @@.cyan;Sketti@@
&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget &quot;SidebarButton&quot;&gt;&gt;
&lt;br&gt;&lt;br&gt;
	&lt;&lt;if $nextButton == &quot;END WEEK&quot;&gt;&gt;
		&lt;span id=&quot;endWeekButton&quot;&gt;&lt;strong&gt;&lt;&lt;link $nextButton $nextLink&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/strong&gt;&lt;/span&gt; @@.cyan;[Enter]@@
	&lt;&lt;else&gt;&gt;
		&lt;span id=&quot;nextButton&quot;&gt; /* target for miscWidgets&#39; &lt;&lt;UpdateNextButton&gt;&gt; */
			&lt;strong&gt;&lt;&lt;link &quot;$nextButton&quot;&gt;&gt; /* must use link so spacebar shortcut will work */
				&lt;&lt;if $nextButton != &quot; &quot;&gt;&gt; /* but no effect if nextButton is set to a blank space */
					&lt;&lt;set $ui = &quot;main&quot;&gt;&gt;
					&lt;&lt;goto $nextLink&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/link&gt;&gt;&lt;/strong&gt;
			&lt;&lt;if $nextButton != &quot; &quot;&gt;&gt;@@.cyan;[Space]@@&lt;&lt;/if&gt;&gt;
		&lt;/span&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;br&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="16" name="description widgets" tags="widget nobr" position="80,199" size="100,100">&lt;&lt;widget &quot;MainLinks&quot;&gt;&gt;

&lt;center&gt;
&lt;&lt;switch $personalAttention&gt;&gt;
&lt;&lt;case &quot;business&quot;&gt;&gt;You plan to focus on business this week.
&lt;&lt;case &quot;trading&quot;&gt;&gt;This week you will learn trading.
&lt;&lt;case &quot;warfare&quot;&gt;&gt;This week you will learn modern combat tactics.
&lt;&lt;case &quot;engineering&quot;&gt;&gt;This week you will learn engineering.
&lt;&lt;case &quot;medicine&quot;&gt;&gt;This week you will learn medicine.
&lt;&lt;default&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;span id=&quot;managePA&quot;&gt;&lt;strong&gt;&lt;&lt;link &quot;Change plans&quot;&gt;&gt;&lt;&lt;goto &quot;Personal Attention Select&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/strong&gt;&lt;/span&gt; @@.cyan;[A]@@

&lt;&lt;/widget&gt;&gt;



&lt;&lt;widget &quot;FluffyDesc&quot;&gt;&gt;
	&lt;br&gt;$activeFluffy.name is a $activeFluffy.gender $activeFluffy.breed.
	&lt;br&gt;&lt;&lt;They&gt;&gt; has a &lt;&lt;inlineColor $activeFluffy.cColor&gt;&gt; coat, &lt;&lt;inlineColor $activeFluffy.mColor&gt;&gt; mane and &lt;&lt;inlineColor $activeFluffy.eColor&gt;&gt; eyes. 
	&lt;br&gt;&lt;&lt;They&gt;&gt; is $activeFluffy.age years and $activeFluffy.ageWeeks weeks old.
	&lt;br&gt;&lt;&lt;They&gt;&gt; weighs $activeFluffy.weight (max $activeFluffy.maxWeight) KG.  &lt;&lt;They&gt;&gt; is $activeFluffy.length cm long (max $activeFluffy.maxLength) and is $activeFluffy.height cm tall (max $activeFluffy.maxHeight).  
	&lt;br&gt;&lt;&lt;They&gt;&gt; can live up to $activeFluffy.maxAge years and has a fertility score of $activeFluffy.fertility.
	&lt;br&gt;
	&lt;br&gt;Stats
	&lt;br&gt;Strong: [$activeFluffy.strong], Energy [$activeFluffy.energy], Charm [$activeFluffy.charm], Thinking [$activeFluffy.thinking], Learning [$activeFluffy.learning].
&lt;&lt;/widget&gt;&gt;

/%
 Call as &lt;&lt;shortDesc $fluffy&gt;&gt;
	Calling this widget will create a summary for the passed fluffy
	It should be preceeded by the fluffy selection link.
%/

&lt;&lt;widget &quot;shortDesc&quot;&gt;&gt;
	&lt;&lt;set _fluffy = $args[0]&gt;&gt;

	_fluffy.gender _fluffy.breed. | &lt;&lt;inlineColor _fluffy.cColor&gt;&gt; coat | &lt;&lt;inlineColor _fluffy.mColor&gt;&gt; mane | &lt;&lt;inlineColor _fluffy.eColor&gt;&gt; eyes
	&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Trust [_fluffy.trust] Training [_fluffy.training] Strong [_fluffy.strong] Energy [_fluffy.energy] Charm [_fluffy.charm] Thinking [_fluffy.thinking] Learning [_fluffy.learning] Fertility [_fluffy.fertility]
	&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_fluffy.age years and _fluffy.ageWeeks weeks old / _fluffy.maxAge years | _fluffy.weight KG. _fluffy.length cm long _fluffy.height cm tall  
	&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Mother ... Father ... Children ... &lt;&lt;if _fluffy.specialFriend != -1&gt;&gt;Special Friend &lt;&lt;print $ourStore.fluffies[_fluffy.specialFriend].name&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

</tw-passagedata><tw-passagedata pid="17" name="Fluffy Breeding" tags="nobr" position="1376,781" size="100,100">&lt;&lt;set $ui = &quot;main&quot;&gt;&gt;
&lt;br&gt;
&lt;br&gt;

&lt;&lt;FluffyDesc&gt;&gt;
&lt;br&gt;
&lt;&lt;if $breedStal &lt; 0 || $breedMare &lt; 0&gt;&gt;
	&lt;br&gt;Possible mates for  $activeFluffy.name:
	&lt;hr&gt;
	
	&lt;&lt;if ($activeFluffy.ageWeeks + ($activeFluffy * 52)) &lt; $activeFluffy.maturity&gt;&gt;
		&lt;br&gt;&lt;br&gt;@@.red;Foal $activeFluffy.ID - selected for breeding@@&lt;br&gt;&lt;br&gt;
	&lt;&lt;elseif $activeFluffy.gender == &quot;male&quot;&gt;&gt;
		&lt;&lt;set $breedStal = $activeFluffy.ID&gt;&gt;
	&lt;&lt;elseif $activeFluffy.gender == &quot;female&quot;&gt;&gt;
		&lt;&lt;set $breedMare = $activeFluffy.ID&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;br&gt;&lt;br&gt;@@.red;Invalid Gender found $activeFluffy.ID - &quot; &lt;&lt;print $activeFluffy.gender&gt;&gt; &quot;@@&lt;br&gt;&lt;br&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;for _bf to 0; _bf lt $ourStore.fluffies.length; _bf++&gt;&gt;
	
		&lt;&lt;set _fluff = $ourStore.fluffies[_bf]&gt;&gt;
		
		&lt;&lt;if $ourStore.fluffies[_bf].gender != $activeFluffy.gender &amp;&amp; ($ourStore.fluffies[_bf].ageWeeks + ($ourStore.fluffies[_bf].age * 52)) &gt;= $ourStore.fluffies[_bf].maturity&gt;&gt;
			@@.green;_fluff.name@@ &lt;&lt;shortDesc _fluff&gt;&gt;
			&lt;&lt;if $ourStore.fluffies[_bf].gender == &quot;male&quot;&gt;&gt;
				&lt;&lt;set $breedStal = $ourStore.fluffies[_bf].ID&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set $breedMare = $ourStore.fluffies[_bf].ID&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[[Set Special Friend|Fluffy Breeding]]
			&lt;hr&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;br&gt;$ourStore.fluffies[$breedStal].name and $ourStore.fluffies[$breedMare].name are now special friends.
&lt;br&gt;
&lt;br&gt; SPECIAL HUGS NOW

&lt;&lt;set $ourStore.fluffies[$breedStal].specialFriend = $breedMare&gt;&gt;
&lt;&lt;set $ourStore.fluffies[$breedMare].specialFriend = $breedStal&gt;&gt;
&lt;&lt;/if&gt;&gt;

	</tw-passagedata><tw-passagedata pid="18" name="Fluffy List" tags="nobr" position="1199,847" size="100,100">&lt;&lt;set $ui = &quot;main&quot;&gt;&gt;
&lt;br&gt;
&lt;br&gt;
&lt;&lt;set $nextButton to &quot;Back to the shop.&quot;, $nextLink to $returnTo&gt;&gt;
&lt;&lt;set _eMare = [], _eStal = []&gt;&gt;


&lt;&lt;capture _f&gt;&gt;

&lt;&lt;for _f to 0; _f lt $ourStore.fluffies.length; _f++&gt;&gt;

	&lt;&lt;set _fluff = $ourStore.fluffies[_f]&gt;&gt;

	[[_fluff.name|Name Fluffy][$activeFluffy = $ourStore.fluffies[_f]]] &lt;&lt;shortDesc _fluff&gt;&gt;
	&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[[Breeding|Fluffy Breeding][$nextButton = &quot;Back.&quot;, $nextLink = passage(), $activeFluffy = $ourStore.fluffies[_f], $breedMare = -1, $breedStal = -1]] | [interact with] | [set food] | [train]
	&lt;&lt;set $ourStore.fluffies[_f] = _fluff&gt;&gt;
	&lt;hr&gt;

/%
	&lt;&lt;if $ourStore.fluffies[$i].gender == &quot;female&quot; &amp;&amp; !$ourStore.fluffies[$i].pregnant &amp;&amp; !$ourStore.fluffies[$i].nursing &amp;&amp; $ourStore.fluffies[$i].specialFriend == -1&gt;&gt;
		&lt;&lt;run _eMare.push($ourStore.fluffies[$i])&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $ourStore.fluffies[$i].gender == &quot;male&quot; &amp;&amp; $ourStore.fluffies[$i].specialFriend == -1&gt;&gt;
		&lt;&lt;run _eStal.push($ourStore.fluffies[$i])&gt;&gt;
	&lt;&lt;/if&gt;&gt;
%/
	
&lt;&lt;/for&gt;&gt;

/%
&lt;&lt;if _eMare.length&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;for _f to 0; _f lt _eMare.length; _f++&gt;&gt;
		&lt;&lt;set _tID = _eMare[_f].ID&gt;&gt;
		[[_eMare[_f].name|Name Fluffy][$activeFluffy = $ourStore.fluffies[_tID]]] &lt;&lt;shortDesc _eMare[_f]&gt;&gt;
		&lt;&lt;set $ourStore.fluffies[_tID] = _eMare[$i]&gt;&gt;
		&lt;hr&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if _eStal.length&gt;&gt;
	&lt;&lt;for _f to 0; _f lt _eStal.length; _f++&gt;&gt;
		&lt;&lt;set _tID = _eStal[_f].ID&gt;&gt;
		[[_eStal[_f].name|Name Fluffy][$activeFluffy = $ourStore.fluffies[_tID]]]], &lt;&lt;shortDesc _eStal[_f]&gt;&gt;
		&lt;&lt;set $ourStore.fluffies[_tID] = _eStal[_f]&gt;&gt;
		&lt;hr&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/if&gt;&gt;
%/
&lt;&lt;set $activeFluffy = 0, _fluff = 0&gt;&gt;
&lt;&lt;/capture&gt;&gt;</tw-passagedata><tw-passagedata pid="19" name="Name Fluffy" tags="nobr" position="1102,998" size="100,100">&lt;&lt;set $ui = &quot;main&quot;&gt;&gt;
&lt;br&gt;
&lt;br&gt;
&lt;&lt;set $nextButton to &quot;CONTINUE.&quot;, $nextLink to &quot;Fluffy List&quot;&gt;&gt;

&lt;br&gt;ID: $activeFluffy.ID

&lt;&lt;FluffyDesc&gt;&gt;

&lt;br&gt;What do you want to name this fluffy?  // Press Enter to set a name - @@.red;Warning: no input validate currently!@@
&lt;br&gt;&lt;&lt;textbox &quot;$activeFluffy.name&quot; $activeFluffy.name &quot;Name Fluffy&quot;&gt;&gt; 

&lt;&lt;set $ourStore.fluffies[$activeFluffy.ID] = $activeFluffy&gt;&gt;
</tw-passagedata></tw-storydata>

